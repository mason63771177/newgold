
## 📋 项目概述

### 项目定位
- **产品类型**: 基于H5网页的7天周期性任务游戏平台
- **核心机制**: 红包抢夺 + 任务系统 + 团队裂变
- **商业模式**: 多层级用户结构实现用户增长和资金流转
- **技术架构**: 高并发分布式系统 + 区块链支付 + AI智能服务

### 核心商业逻辑
- **入金门槛**: 固定100 USDT激活账号（唯一充值方式）
- **收益分配**: 70%团队结构分佣 + 20%项目方收益 + 10%活动奖金池
- **周期机制**: 168小时（7天）完整周期循环
- **用户驱动**: 3个核心状态管理用户生命周期 


- 【注册】说明：
    • 注册使用邮箱 + 密码  
    • 注册必须填写邀请码。
    •	 如果是通过别人分享的邀请链接注册，邀请码自动写入、且不可修改 。
    • 注册成功后，用户自动进入 状态1。
	

- 【上级邀请人】说明：
    - 每个用户都有一个唯一的【上级邀请人】，一旦在数据库中创建，则将无法更改。

- 【邀请链接】说明：
    - 每一个【邀请链接】被用户点击，先要查看这个【邀请链接】是否还在168小时有效期内，如果不在有效期内，直接跳转到【邀请链接失效的页面】。
    - 每个用户都有一个唯一的【邀请链接】
    - 【邀请链接】的有效期是168个小时（按照入金 链上确认时间开始计算，168小时后失效）
    - 【邀请链接】失效后，用户就不能再通过这个链接邀请好友入金
    - 如【邀请链接】失效，用户在之前发给过好友，好友有点击这个邀请链接的行为，则该用户不能再通过这个【邀请链接】邀请好友入金，同时用户的好友点击这个邀请链接也进入不到我们的项目中，把所有失效的邀请链接都链接到一个 【邀请链接失效的页面】当中。
    - 【邀请链接失效的页面】显示：
        - 邀请链接失效文案
        - 邀请链接失效引导文案

- 【排行榜】说明：
    - 团队排行榜
        - 按结构总人数排行
        - 团队直接推荐人数排行
        - 本人 本周 本月
    - 红包排行榜
        - 按【红包】收入USDT总额排行
        - 本日 本周 本月
    - 大神排行榜
        - 按大神等级排行 
    
- 【资金池】说明：
    - 所有玩家入金进入总资金池（每个100USDT入金）
        - 其中70%资金作为【团队分佣资金】
            - 每个玩家成功入金100USDT，此玩家的【上级推荐人】分得10USDT
            - 玩家的【上级推荐人】的【上级推荐人】分得10USDT
            - 玩家的【上级推荐人】的【上级推荐人】的【上级推荐人】分得10USDT
            - 玩家的【上级推荐人】的【上级推荐人】的【上级推荐人】的【上级推荐人】分得10USDT
            - 玩家的【上级推荐人】的【上级推荐人】的【上级推荐人】的【上级推荐人】的【上级推荐人】分得10USDT
            - 玩家的【上级推荐人】的【上级推荐人】的【上级推荐人】的【上级推荐人】的【上级推荐人】的【上级推荐人】分得10USDT
            - 玩家的【上级推荐人】的【上级推荐人】的【上级推荐人】的【上级推荐人】的【上级推荐人】的【上级推荐人】的【上级推荐人】的【上级推荐人】分得10USDT
            - 总计70USDT，分给上面7个玩家，打入各位玩家的【钱包】

        - 其中10%金额 累计进入【红包池】资金
            - 红包池每天晚上1点记一次帐，把前23小时59分59秒累计的红包金额结算一次
            - 第二天发放【红包池】金额的75%，永久保留25%作为【红包池】的沉淀资金

        - 其中20%金额为【项目方毛利润】，自动打入项目方的钱包地址

- 【抢红包】说明：
    - 规则
        - 谁可以抢红包：
            - 只有处于【状态2】的玩家，才有资格抢红包 
            - 【状态1】和【状态3】玩家没有抢红包的入口，如果玩家强行发抢红包的命令，则回复该玩家没有资格参加抢红包活动
        
        - 隐藏数据
            - 在玩家抢红包过程中，不要显示总共有多少玩家有资格参与抢红包活动
        - 红包池总金额要在【后台】设置功能，提供管理员虚拟数字（可选真实金额或者虚拟虚拟或者真实金额的倍数设置）

    - 未被抢的红包
        - 如出现未被抢走的红包金额，直接计入【红包池】内    

    - 红包金额
        - 每个红包随机分配
        - 计算有资格抢红包的人数 ，计算【红包池】中的总金额
        - 最小单红包金额： 0.01USDT
        - 最大单红包金额： 【红包池】中的总金额 * 0.75 / 3 / 资格抢红包的人数 * 2

    - 时间安排:
        - 每日3次：早9点、中午12点、晚8点
        - 每次开启后仅77秒抢夺时间

    - 资金分配算法:
        - 每日第1轮：【红包池】总资金25%
        - 每日第2轮：【红包池】总资金25%
        - 每日第3轮：【红包池】总资金25%
        - 平台沉淀：【红包池】总资金25%（不显示给用户，项目方后台可调配的资金）

    - 技术实现:
        - Redis过期机制控制77秒倒计时
        - 定时任务清理确保倒计时准确性
        - 分布式锁防止红包超发
        - 令牌桶算法限流
        - 预分配红包池减少实时计算
    
    - 预告推送:
        - 推送时间:
            - 提前30分钟预告
            - 提前1分钟最终提醒
        - 推送目的:
            - 提醒玩家准时抢红包
            - 教育玩家刺激裂变
            - 激活玩家结构活跃度    
    
    - 抢红包后推送：
        - 关于自己抢红包
            - 推送时间：
                - 抢到红包后立即推送
            - 推送内容：
                - 抢到的红包金额
                - 当前【红包池】总金额
            - 自动更新【钱包】余额己的【钱包】余额
        
        - 如果玩家自己错失了红包（没有抢）
            - 推送时间：
                - 红包活动结束后1分钟后推送
            - 推送内容：
                - 本应属于你的红包被XXX拿走（让玩家有失去的感觉）
        
        - 关于上下七层（自己可能认识的玩家所抢的红包金额）:
            - 推送时间：
                - 红包活动结束后1分钟后推送
            - 推送内容：
                1. 层级权重：上级用户优先显示（上下7层内关系越近越好）
                2. 互动频次：活跃用户排名靠前
                3. 时间衰减：最近参与者优先显示
        
        - 推送策略:
            - 优先推送抢到大包的玩家
            - 优先推送结构内高收益玩家的团队人数
            - 错过红包时推送"本应属于你的红包被XXX拿走"制造失落感




- 【任务】说明：
    - 【新手任务】
        - 触发条件: 
            - 完成入金进入【状态2】同时触发
        
        - 执行规则:
            - 必须按序号1→2→3顺序触发
            - 完成全部任务后永不再出现
            - 每个账号仅可执行一次，做完一次永久不在显示

        - 任务详情:
           
            - 【新手任务1】: 直接推荐1人
                - 目的: 让玩家发展下线，初尝甜头，熟悉系统
                - 奖励: 结构佣金10 USDT
            - 【新手任务2】: 帮助下级推荐1人
                - 目的: 体验当教练的感觉，隔代收入爽感
                - 奖励: 结构佣金10 USDT
            - 【新手任务3】: 教下级如何教他的下级推荐1人
                - 目的: 真正让自己的结构动起来
                - 奖励: 结构佣金10 USDT
    
     
    - 【答题任务】
        - 触发条件: 
            - 完成【新手任务1】后触发

        - 【题库设置】:
            - 准备20道关于裂变、如何正确发展下线的选择题
            - 目的：变相教育客户、提高客户转化率
 
    - 【奖励机制】:
        - 基础【提现手续费】: 5%
        - 每答对一题: 减少0.2%【提现手续费】
        - 最低【提现手续费】: 1%
        - 最大优惠: 答对20题（【提现手续费】从5%降至1%）

        - 执行规则:
            - 题目逐道出现，ABCD四选一
            - 答对：直接告知【提现手续费】-0.2%
            - 答错：告知正确答案，让玩家重新选择
        - 机制:
            - 答对20道题后永久关闭任务
            - 每个账号仅可执行一次
            - 未完成则任务持续存在

    - 【大神任务】
        - 触发条件:
            - 完成【新手任务】且 完成【答题任务】后触发 （和状态无关）

        - 完成任务条件 计算公式（采用等比数列递增）:
            - 【大神任务一】: 完美裂变 直推2人 × 2层 = 6人 【大神一级】
                - 说明：直接推荐A，B成功入金，A推荐A1、A2成功入金，B推荐B1、B2成功入金。共计6人，即为完成【大神任务一】。
            - 【大神任务二】: 完美裂变 直推3人 × 3层 = 39人 【大神二级】
                - 说明：直接推荐D、E、F成功入金，D推荐D1、D2、D3成功入金，E推荐E1、E2、E3成功入金，F推荐F1、F2、F3成功入金。D1推荐D11、D12、D13成功入金，E1推荐E11、E12、E13成功入金，F1推荐F11、F12、F13成功入金。共计39人，即为完成【大神任务二】。
            - 【大神任务三】: 完美裂变 直推4人 × 4层 = 340人 【大神三级】   
                - 说明：直接推荐G、H、I、J成功入金，每人再推荐4人成功入金（第2层16人），每个第2层再推荐4人成功入金（第3层64人），每个第3层再推荐4人成功入金（第4层256人）。共计4+16+64+256=340人，即为完成【大神任务三】。
            - 【大神任务四】: 完美裂变 直推5人 × 5层 = 3905人 【大神四级】
                - 说明：直接推荐5人成功入金，每人再推荐5人成功入金（第2层25人），每个第2层再推荐5人成功入金（第3层125人），每个第3层再推荐5人成功入金（第4层625人），每个第4层再推荐5人成功入金（第5层3125人）。共计5+25+125+625+3125=3905人，即为完成【大神任务四】。
            - 【大神任务五】: 完美裂变 直推6人 × 6层 = 55986人 【大神五级】 
                - 说明：直接推荐6人成功入金，每人再推荐6人成功入金（第2层36人），每个第2层再推荐6人成功入金（第3层216人），每个第3层再推荐6人成功入金（第4层1296人），每个第4层再推荐6人成功入金（第5层7776人），每个第5层再推荐6人成功入金（第6层46656人）。共计6+36+216+1296+7776+46656=55986人，即为完成【大神任务五】。   
            - 【大神任务六】: 完美裂变 直推7人 × 7层 = 960799人 【大神六级】
                - 说明：直接推荐7人成功入金，每人再推荐7人成功入金（第2层49人），每个第2层再推荐7人成功入金（第3层343人），每个第3层再推荐7人成功入金（第4层2401人），每个第4层再推荐7人成功入金（第5层16807人），每个第5层再推荐7人成功入金（第6层117649人），每个第6层再推荐7人成功入金（第7层823543人）。共计7+49+343+2401+16807+117649+823543=960799人，即为完成【大神任务六级】。

        - 奖励机制:
            - 完成【大神任务一】奖励: 50 USDT（直接存入客户钱包） + 【大神一级】称号
            - 完成【大神任务二】奖励: 200 USDT（直接存入客户钱包） + 【大神二级】称号
            - 完成【大神任务三】奖励: 1000 USDT（直接存入客户钱包） + 【大神三级】称号
            - 完成【大神任务四】奖励: 5000 USDT（直接存入客户钱包） + 【大神四级】称号
            - 完成【大神任务五】奖励: 10000 USDT（直接存入客户钱包） + 【大神五级】称号
            - 完成【大神任务六】奖励: 50000 USDT（直接存入客户钱包） + 【大神六级】称号

        - 任务详情显示策略:
            - 1-3级: 显示具体人数（避免吓到玩家）
            - 4-6级: 显示模糊描述（"大量"、"海量"等）

        - 周期机制:
            - 每次168小时倒计时结束，记录玩家账号当期"大神级别"
            - 记录玩家账号历史最高"大神级别"    

        - 大神排行榜规则:
            - 显示大神历史最高等级排行
            - 排序：大神等级 > 同级团队总人数 > 时间早晚
            - 每30分钟刷新一次



- 【我的团队】说明：
    - 成功入金的下级7层内的玩家才会进入到【我的团队】中
    - 7层团队结构（7层内直接间接推荐的人入金都有10USDT的收入）
        - 第1层：直接推荐人
        - 第2层：直接推荐人推荐的人
        - 第3层：直接推荐人推荐的人推荐的人
        - 第4层：直接推荐人推荐的人推荐的人推荐的人
        - 第5层：直接推荐人推荐的人推荐的人推荐的人推荐的人
        - 第6层：直接推荐人推荐的人推荐的人推荐的人推荐的人推荐的人
        - 第7层：直接推荐人推荐的人推荐的人推荐的人推荐的人推荐的人推荐的人 

- 【我的钱包】说明：
    - 【我的钱包】功能实际上是一个中心化的钱包，只有玩家【提款】才会才我们的钱包里自动打给客户绑定的自己的TRC20的钱包（不要把“中心化”这三个字展示给客户）

    - 激活账号（入金）:
        - 固定: 100 USDT（铁律，无任何其他金额选项）
        - 支付: USDT（唯一充值方式）        
        - 只有在【状态1】和【状态3】才能进行入金，【状态2】不显示激活账号（入金）的功能 
        - 玩家点击激活账号（入金）功能后，系统会给每个玩家分配一个玩家独有的钱包地址来识别是哪个玩家入金。
        - 玩家激活账号（入金），在链上确认后，玩家会自动进入【状态2】，并不是把这100USDT存入钱包余额里，钱包余额不会算入这100USDT，但是在交易详情中可以看到这笔款项为激活账号，玩家入金只是激活账号。【状态1入金后进入状态2，状态3再次入金后也进入状态2，形成2↔3循环】
    
    - 提现功能:
        - 手续费说明
            - 采用固定手续费+非固定手续费
            - 固定手续费: 2 USDT
            - 非固定手续费: 提现金额的1%-5%
                - 通过【答题任务】降低百分比
                    - 基础: 5%
                    - 每题递减: 0.2%
                    - 最低: 1%
        - 举例
            - 客户中心化钱包里有300USDT的余额，现在客户点击提款，现在客户没有做【答题任务】所有客户的非固定手续费为5%，那么现在客户的提现手续费就是 2USDT + （300USDT * 5%） = 2 + 15 = 17USDT ，客户实际到账 300USDT -  17USDT = 283USDT。
        - 提现限制
            - **单笔提现**: 最低20 USDT，最高2000 USDT
            - **单日限制**: 最高50000 USDT
    - 查看交易详情：
        - 发生时间
        - 来源详情
            - 激活缴费
            - 提现
            - 红包
            - 任务奖励
        - 余额变动记录




【数据库】表结构：
- 用户表（user）
    - 用户ID（user_id）
       - TELEGRAM_ID  （telegram_id）
       - telegram用户名（username）
    - 【上级邀请人】TELEGRAM_ID（inviter_telegram_id）
    - 【上级邀请人】TELEGRAM用户名（inviter_username）
    - 状态（status）
        - 1  新手状态 【初始状态】 【用户点击邀请链接未入金】 
        - 2  已入金168小时倒计时 【挑战状态】 【用户入金100USDT后，包括首次入金和再次入金】
        - 3  168小时结束未复购 【倒计时结束状态】 【168小时倒计时结束后】
        【状态流转逻辑：1→2（入金）→3（168小时后）→2（再次入金），形成2↔3循环】
    - 创建时间（create_time）
    - 进入状态时间（enter_status_time）
    - 168小时倒计时结束时间（countdown_end_time）
    - 第几次入金（repurchase_count）【现在所有入金后都进入状态2，不再区分首次入金和复购入金的状态】
    - 更新时间（update_time）

- 任务表（task）


- 【空结构】说明
    "空结构\"的理解。\n\n当一个用户激活账号（充值100 USDT）时，资金分配如下：\n- 100 USDT 总入金\n- 20 USDT → 项目方收入\n- 10 USDT → 红包池\n- 70 USDT → 团队结构分佣（这是关键部分）\n\n对于这70 USDT的分配：\n- 系统检查新用户有几个上级（ancestors）\n- 每个上级固定分配10 USDT\n- 如果只有1个上级：给这1个上级10 USDT，剩下60 USDT进入\"空结构资金池\"\n- 如果有3个上级：给这3个上级每人10 USDT（共30 USDT），剩下40 USDT进入\"空结构资金池\"\n- 如果有7个上级：给这7个上级每人10 USDT（共70 USDT），没有资金进入\"空结构资金池\"\n\n所以\"空结构\"指的是：当用户的上级链条不足7层时，本应分配给7层上级的70 USDT中，无法分配的部分就成为\"空结构资金\"，这部分资金归项目方所有。"

    "空结构\"的正确定义：\n\n**空结构的正确定义：**\n当新用户激活账号（入金100 USDT）时：\n1. 70 USDT用于团队结构分佣，应分配给该用户的7层上级，每层10 USDT\n2. 如果该用户的上级链条不足7层，则无法分配的资金部分就是\"空结构资金\"\n3. 这些空结构资金归项目方所有，不显示给用户，但需要记录流向\n\n**举例说明：**\n- 用户只有1个上级：分配10 USDT，空结构资金60 USDT\n- 用户有3个上级：分配30 USDT，空结构资金40 USDT  \n- 用户有7个或以上上级：分配70 USDT，空结构资金0 USDT\n\n*

    🔧 核心逻辑
        空结构资金分配规则 ：
        - 总奖励池：70 USDT
        - 每层奖励：10 USDT
        - 最多分配：7层
        - 空结构资金 = 70 - (实际层数 × 10)
    资金流向 ：
     1.有上级的层级：每层获得10 USDT奖励
     2.缺失的层级：对应资金转入项目方账户
     3.所有交易都有完整的记录和追踪


- 【推送系统】说明：
    - 主动推送: 
        - 频率：每日两次 上午11点 下午5点
        - 内容：
            - "对症下药"式刺激多巴胺分泌
            - 基于用户行为后台默默观察
            - 任务完成奖励提醒
            - 团队管理奖励提醒
    - 入金成功推送:
        - 触发机制: 玩家A入金成功，且玩家A的上级邀请人存在，则给上级推送
        - 推送内容:
            - 第几层结构新玩家激活
            - 收入金额
            - 总余额更新
        - 分层文案策略:
           - 1: "【直推入账】你的第①层成员 @{child} 已激活 ✅",
           - 2: "【二层回响】第②层成员 @{child} 激活成功 ✨",
           - 3: "【三界传来】第③层成员 @{child} 刚完成激活 📈",
           - 4: "【四方来贺】第④层成员 @{child} 已就位 🧭",
           - 5: "【五芒加持】第⑤层成员 @{child} 点亮节点 ⭐️",
           - 6: "【六合同风】第⑥层成员 @{child} 完成激活 🛰️",   
           - 7: "【七曜齐鸣】第⑦层成员 @{child} 成功激活 🌌",
    - 红包到账推送:
        - 触发机制: 玩家A收到红包
        - 推送内容:
            - 红包金额
            - 总余额更新
        - 文案策略:
            - "恭喜你，你已成功领取到红包，当前余额为：{amount} USDT"
    - 任务完成推送:
        - 触发机制: 玩家A完成任务
        - 推送内容:
            - 任务名称
            - 任务奖励
            - 总余额更新
        - 文案策略:
            - "恭喜你，你已完成任务，当前余额为：{amount} USDT"

- 【点赞功能】说明
    - **触发条件**:
        - 玩家成功入金后
        - 该玩家上层7个人收到佣金到账消息
    - **功能机制**:
        - 弹出上层7代邀请人给该玩家点赞的按钮
        - 上层7人点赞鼓励推送给玩家
        - 增强团队凝聚力和成就感



---
# 主程序
## 逻辑 
1. 每次用户发送/start 命令时都需要到【数据库】中查询用户状态
    - **【状态1】: 点击【邀请链接】未入金 已注册【新手状态】**
        - 首页内容显示：
            - 你是由“【上级邀请人】的TELEGRAM用户名”推荐而来，开始你的7天挑战之旅
            - 展示激活账号引导文案
            - 教育内容
            - 法律合规文案展示
            - 入金引导流程
            - 关键文案策略
                - 刺激玩家入金欲望
                - 展示赚钱希望和可能性
                - 打破用户疑虑，解释7天任务游戏机制
                - 强调"事业机会"而非"生活费补贴"
            - 激发尝试7天任务游戏的动机   
        - 按钮功能：
            - 激活账号
                - 点击后进入【入金】流程界面
                - 分配给用户一个独立的TRC20的USDT钱包地址，让客户入金100USDT（唯一金额，不可以多也不可以少）
                - 入金完成（链上确认）后 用户的身份切换至【状态2: 已入金168小时倒计时】的【初次挑战状态】
            - 查看收益【排行榜】
                - 给客户展示收入排名前十的用户
                - 展示团队总人数 直接推荐人数 这些好看的数据
                - 用户还可以看到自己的直接推荐人以及向上7层（用户有可能认识的人的 团队人数 及 收益）
        - **总结**：这一页的唯一目的就是让别邀请进来的新用户入金，刺激用户的多巴胺，让用户感觉到如果不尽快入金对于自己来说就会有损失，越早干遂越快，越能获得收益。功能限制只有这两个功能。不需要有多加的功能        
    
    - **【状态2】: 已入金168小时倒计时【初次挑战状态】**
        - 首页内容显示：
            - 【168小时精确倒计时】显示 (时:分:秒)
            - 激励文案显示
            - 新手任务跟踪显示
            - 教育玩家直接推荐机制
            - 引导发展下线
            - 强调时间紧迫性
            - 教育玩家直接推荐机制
        - 按钮功能
            - 【邀请链接】生成功能
                - 点击后生成一个唯一的【邀请链接】，用户可以通过这个链接邀请好友
                - 提示用户这个【邀请链接】的有效期只有168个小时，现在还剩余多少小时
                - 提示用户168小时后，这个【邀请链接】就会失效，让用户珍惜这168小时的时间
                - 点击【邀请链接】自动复制到剪切板
            - 【任务】按钮
                - 显示现在可以做的任务列表
                - 并且显示任务说明（参考大型网络游戏的任务系统）
                - 已经完成不在显示
            - 【我的团队】按钮
                - 用树状图显示已经入金成员的团队结构（如果人数过多，后面几层就显示省略号）
            - 【抢红包】按钮
                - 如果抢红包时间没有到，给用户提示发放红包时间
                - 如果在77秒抢红包活动时间内，判断用户是否有资格抢红包
                    - 如果有资格，直接让用户抢红包
                    - 如果没有资格，给用户提示不能抢红包
            - 【我的钱包】按钮
                - 提现功能
                    - 提现限制：单笔提现20USDT-10000USDT，单日提现50000USDT
                    - 提现方式：TRC20 USDT钱包地址
                - 交易记录
                    -  交易记录功能
                        - 展示用户的激活记录
                        - 展示用户的提现记录
                        - 展示用户的抢红包记录
            - 【排行榜】按钮
                - 团队排行榜
                    - 按结构总人数排行
                    - 团队直接推荐人数排行
                    - 本人 本周 本月
                - 红包排行榜
                    - 按【红包】收入USDT总额排行
                    - 本日 本周 本月
                - 大神排行榜
                    - 按大神等级排行

    - **【状态3】: 168小时结束未复购**
        - 首页内容显示：
            - 激励文案
            - 激活账号(复购)引导
            - 上期成绩展示
            - 催促再次激活玩下一期
        - 按钮功能
            - 【我的钱包】按钮
                - 提现功能
                    - 提现限制：单笔提现20USDT-10000USDT，单日提现50000USDT
                    - 提现方式：TRC20 USDT钱包地址
                - 交易记录
                    -  交易记录功能
                        - 展示用户的激活记录
                        - 展示用户的提现记录
                        - 展示用户的抢红包记录
            - 【我的团队】按钮
                - 用树状图显示已经入金成员的团队结构（如果人数过多，后面几层就显示省略号）
            - 【排行榜】按钮
                - 团队排行榜
                    - 按结构总人数排行
                    - 团队直接推荐人数排行
                    - 本人 本周 本月
                - 【红包排行榜】按钮
                    - 按【红包】收入USDT总额排行
                    - 本日 本周 本月
                - 【大神排行榜】按钮
                    - 按大神等级排行
            - 再次【激活账号】按钮
                - 点击后进入【入金】流程界面
                - 分配给用户一个独立的TRC20的USDT钱包地址，让客户入金100USDT（唯一金额，不可以多也不可以少）
                - 入金完成（链上确认）后 用户的身份切换至【状态2: 已入金168小时倒计时】
        


    
        【现在状态3的用户再次入金后直接进入状态2】  

2. 判断完成后根据用户状态显示专属这个状态的 用户欢迎页

【状态2结束直接进入状态3，状态3再次入金回到状态2】


- 关于注册
用户邮箱注册，注册时必须填写邀请码，注册成功后自动进入状态1。 用户分享的链接里面自带邀请码参数，如果是点击别的用户的链接进入的注册页面，邀请码那一项自动写进去，不可被更改。

---

具体说明：

核心状态 & 流转
	•	三个状态：
状态1（新手/未入金）→ 状态2（入金后、168小时倒计时）→ 状态3（168小时结束未复购）→ 状态2（再次入金）。状态2和状态3形成循环。   

各状态首页“只允许”的按钮
	•	状态1：仅两项
①「激活账号」→ 入金100 USDT（链上确认后进入状态2）；②「查看收益【排行榜】」。这页目的就是刺激入金，功能限制只有这两个。   
	•	状态2：按钮包括
「邀请链接」生成（提示剩余有效期）、 「任务」、 「我的团队」、 「抢红包」、 「我的钱包」（提现/记录）、 「排行榜」。     
	•	状态3：按钮包括
「我的钱包」、 「我的团队」、 「排行榜」、 「红包排行榜」、 「大神排行榜」、 「再次激活账号」。 
	•	

邀请链接（生成与有效期）
	•	每个用户都有自己的唯一邀请链接；被点击时先判断是否仍在有效期，过期一律跳转到「邀请链接失效」页面。   
	•	有效期固定 168 小时，起算点是入金的链上确认时间；状态2里点「邀请链接」要提示剩余小时数     

抢红包（资格与时间）
	•	谁可以抢：只有状态2的玩家有资格；状态1与状态3没有入口，若强行请求要明确提示「没有资格」。 
	•	时间安排：每天三场（9:00 / 12:00 / 20:00），每场仅77秒；不在时间段就提示下一次开放时间，进入77秒窗口再判断资格并放行。   

任务系统（严格顺序触发）
	•	新手任务：在进入状态2时触发，必须按 1→2→3 顺序逐个完成；完成全部后永久不再出现，且每账号仅一次。 
	•	答题任务：当完成新手任务1后触发；用于降低提现百分比手续费（从5%起，每答对一道-0.2%，最低1%），最多答对20题后关闭；每账号仅一次。     
	•	大神任务：完成“新手任务”+“答题任务”后才触发；按等比扩展的人数目标分级，完成给USDT奖励与对应“大神等级”，用于排行榜。   

我的钱包（提现与记录）
	•	提现手续费= 固定 2 USDT + 百分比 1%~5%（比例由“答题任务”成绩降低）；文档示例计算了 300 USDT 的提现费用。   
	•	提现限制：单笔 20–2000 USDT、单日 50000 USDT；记录含：激活/提现/红包/任务奖励/余额变动。   

排行榜
	•	三类：团队排行（总人数/直推人数，可选本人/本周/本月）、红包排行（收入USDT：本日/本周/本月）、大神排行（历史最高等级）。     

⸻


补充说明：
🔑 关于 168 小时倒计时与收益的关键说明
	•	168 小时倒计时结束
	•	只代表 邀请链接失效 → 不能再拉新。
	•	已经发展的下线（在 168 小时内注册的）不会失效。
	•	他们和他们的团队继续发展，仍然在 7 层内产生收益。
	•	收益结算规则
	•	只要在自己的 7 层团队内有新用户进场，立刻结算收益。
	•	每有 1 个新用户进入，推荐人马上得到 10 USDT，直接进入其 中心化钱包（项目方托管的钱包）。
	•	这部分收益 不受邀请链接过期影响，只要链条在 7 层内，收益始终有效。
	

---

裂金 7 日 · 完整状态与功能流程图
[注册页面]
  ↓
  - 邮箱注册，必须填写邀请码
  - 若通过邀请链接进入，邀请码自动写入且不可更改
  - 注册成功 → 状态1

──────────────────────────────
[状态 1：新手/未入金]
  功能：
    - 激活账号（入金 100 USDT → 状态2）
    - 查看收益榜单（前10用户）
  限制：
    - 无任务
    - 无红包

  ↓ 入金成功
──────────────────────────────
[状态 2：已入金，168 小时倒计时中]
  功能：
    - 倒计时（168h，从入金确认开始）
    - 任务系统：
        · 新手任务（顺序触发，完成后永久消失）【现在只有3个新手任务】
        · 完成新手任务1后 → 解锁答题任务
        · 完成新手任务+答题任务 → 解锁大神任务【
    - 邀请链接（显示剩余时间，过期即失效）
    - 抢红包：
        · 仅状态2有入口
        · 状态2必须完成 ≥1 个任务才有资格
        · 每天三场（9:00 / 12:00 / 20:00），每场 77 秒
    - 我的团队（7层结构）
    - 我的钱包（提现/记录）
    - 排行榜（团队榜 / 红包榜 / 大神榜）

  ↓ 168 小时结束
──────────────────────────────
[168 小时结束 → 邀请链接失效]
  - 不能再拉新（邀请入口消失）
  - 但在有效期内发展的下线团队仍然保留
  - 团队继续发展时，仍然结算收益：
      · 每有 1 个新用户进入 7 层内
      · 推荐人立即得到 10 USDT
      · 收益直接进入中心化钱包
  ↓
进入状态3
──────────────────────────────
[状态 3：过期未复购]
  功能：
    - 战绩卡（展示上期收益、邀请人数、团队规模）
    - 我的钱包（提现）
    - 我的团队
    - 排行榜
    - 红包排行榜
    - 大神排行榜
    - 再次激活账号（复购 → 状态2）
  限制：
    - 无任务
    - 无红包

  ↓ 复购成功
──────────────────────────────

【现在复购后直接回到状态2，形成状态2↔状态3循环】
  ↓ 复购成功直接回到状态2
──────────────────────────────
回到 [状态 2：已入金，168 小时倒计时中]【状态2↔状态3无限循环】

