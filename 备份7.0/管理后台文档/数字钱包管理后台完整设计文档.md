# æ•°å­—é’±åŒ…ç®¡ç†åå°å®Œæ•´è®¾è®¡æ–‡æ¡£

## ğŸ“‹ æ–‡æ¡£æ¦‚è¿°

æœ¬æ–‡æ¡£æ˜¯æ•°å­—é’±åŒ…ç®¡ç†åå°ç³»ç»Ÿçš„å®Œæ•´è®¾è®¡æ–‡æ¡£ï¼Œæ•´åˆäº†éœ€æ±‚åˆ†æã€æŠ€æœ¯æ¶æ„ã€å®‰å…¨è®¾è®¡ã€æ•°æ®ç®¡ç†ç­‰æ‰€æœ‰ç›¸å…³å†…å®¹ï¼Œä¸ºå¼€å‘å›¢é˜Ÿæä¾›å…¨é¢çš„æŠ€æœ¯æŒ‡å¯¼å’Œå®æ–½æ–¹æ¡ˆã€‚

### æ–‡æ¡£ç»“æ„
- **ç¬¬ä¸€éƒ¨åˆ†ï¼šé¡¹ç›®æ¦‚è§ˆ** - é¡¹ç›®èƒŒæ™¯ã€ç›®æ ‡ã€èŒƒå›´
- **ç¬¬äºŒéƒ¨åˆ†ï¼šéœ€æ±‚åˆ†æ** - åŠŸèƒ½éœ€æ±‚ã€ç”¨æˆ·è§’è‰²ã€ä¸šåŠ¡æµç¨‹
- **ç¬¬ä¸‰éƒ¨åˆ†ï¼šæŠ€æœ¯æ¶æ„** - ç³»ç»Ÿæ¶æ„ã€æŠ€æœ¯é€‰å‹ã€ç»„ä»¶è®¾è®¡
- **ç¬¬å››éƒ¨åˆ†ï¼šå®‰å…¨è®¾è®¡** - å®‰å…¨æ¶æ„ã€æƒé™ç®¡ç†ã€é˜²æŠ¤æœºåˆ¶
- **ç¬¬äº”éƒ¨åˆ†ï¼šæ•°æ®ç®¡ç†** - æ•°æ®è¦†ç›–åˆ†æã€è¡¥å……éœ€æ±‚
- **ç¬¬å…­éƒ¨åˆ†ï¼šå®æ–½è®¡åˆ’** - å¼€å‘è®¡åˆ’ã€éƒ¨ç½²æ–¹æ¡ˆã€éªŒæ”¶æ ‡å‡†

---

## ğŸ¯ ç¬¬ä¸€éƒ¨åˆ†ï¼šé¡¹ç›®æ¦‚è§ˆ

### 1.1 é¡¹ç›®èƒŒæ™¯

æ•°å­—é’±åŒ…ç®¡ç†åå°æ˜¯ä¸ºæ•°å­—é’±åŒ…ç³»ç»Ÿæä¾›å…¨é¢ç®¡ç†åŠŸèƒ½çš„Webåº”ç”¨ç¨‹åºã€‚å½“å‰å‰ç«¯ç³»ç»Ÿå·²å®ç°ç”¨æˆ·é’±åŒ…ç®¡ç†ã€äº¤æ˜“å¤„ç†ã€ä»»åŠ¡ç³»ç»Ÿã€çº¢åŒ…æ´»åŠ¨ç­‰æ ¸å¿ƒåŠŸèƒ½ï¼Œéœ€è¦é…å¥—çš„ç®¡ç†åå°æ¥æ”¯æŒè¿è¥ç®¡ç†ã€ç”¨æˆ·æœåŠ¡ã€æ•°æ®åˆ†æç­‰ä¸šåŠ¡éœ€æ±‚ã€‚

### 1.2 é¡¹ç›®ç›®æ ‡

#### æ ¸å¿ƒç›®æ ‡
- **å…¨é¢æ•°æ®ç®¡ç†**: 100%è¦†ç›–å‰ç«¯ç³»ç»Ÿæ‰€æœ‰æ•°æ®çš„ç®¡ç†åŠŸèƒ½
- **é«˜æ•ˆè¿è¥æ”¯æŒ**: æä¾›ä¾¿æ·çš„è¿è¥ç®¡ç†å·¥å…·å’Œæ•°æ®åˆ†æèƒ½åŠ›
- **å®‰å…¨åˆè§„ä¿éšœ**: ç¡®ä¿ç³»ç»Ÿå®‰å…¨æ€§å’Œç›‘ç®¡åˆè§„æ€§
- **ä¼˜è´¨ç”¨æˆ·ä½“éªŒ**: æä¾›ç›´è§‚æ˜“ç”¨çš„ç®¡ç†ç•Œé¢å’Œæ“ä½œæµç¨‹

#### è´¨é‡ç›®æ ‡
- **æ€§èƒ½ç›®æ ‡**: é¡µé¢åŠ è½½æ—¶é—´ < 2ç§’ï¼ŒAPIå“åº”æ—¶é—´ < 1ç§’
- **å¯ç”¨æ€§ç›®æ ‡**: ç³»ç»Ÿå¯ç”¨æ€§ â‰¥ 99.9%
- **å®‰å…¨ç›®æ ‡**: é›¶å®‰å…¨äº‹æ•…ï¼Œå®Œæ•´å®¡è®¡è¿½è¸ª
- **æ‰©å±•æ€§ç›®æ ‡**: æ”¯æŒ10å€ä¸šåŠ¡å¢é•¿çš„ç³»ç»Ÿæ‰©å±•

### 1.3 é¡¹ç›®èŒƒå›´

#### æ ¸å¿ƒåŠŸèƒ½æ¨¡å—
1. **ç”¨æˆ·ç®¡ç†** - ç”¨æˆ·ä¿¡æ¯ã€çŠ¶æ€ç®¡ç†ã€è¡Œä¸ºåˆ†æ
2. **é’±åŒ…ç®¡ç†** - é’±åŒ…ç›‘æ§ã€èµ„é‡‘å½’é›†ã€ä½™é¢ç®¡ç†
3. **äº¤æ˜“ç®¡ç†** - äº¤æ˜“å®¡æ ¸ã€è®°å½•æŸ¥è¯¢ã€å¼‚å¸¸å¤„ç†
4. **ä»»åŠ¡ç®¡ç†** - ä»»åŠ¡é…ç½®ã€å®Œæˆç»Ÿè®¡ã€å¥–åŠ±å‘æ”¾
5. **çº¢åŒ…ç®¡ç†** - æ´»åŠ¨ç®¡ç†ã€æ•°æ®åˆ†æã€æ•ˆæœè¯„ä¼°
6. **å›¢é˜Ÿç®¡ç†** - å›¢é˜Ÿç»“æ„ã€é‚€è¯·å…³ç³»ã€ç»Ÿè®¡åˆ†æ
7. **æ’è¡Œæ¦œç®¡ç†** - æ’è¡Œé…ç½®ã€æ•°æ®ç®¡ç†ã€å¥–åŠ±è®¾ç½®
8. **ç³»ç»Ÿç›‘æ§** - æ€§èƒ½ç›‘æ§ã€å‘Šè­¦ç®¡ç†ã€æ—¥å¿—åˆ†æ
9. **æƒé™ç®¡ç†** - ç®¡ç†å‘˜è´¦æˆ·ã€è§’è‰²æƒé™ã€æ“ä½œå®¡è®¡

#### è¡¥å……åŠŸèƒ½æ¨¡å—
1. **å®æ—¶é€šä¿¡ç®¡ç†** - WebSocketè¿æ¥ç›‘æ§ã€æ¶ˆæ¯æ¨é€ç®¡ç†
2. **æ‰‹ç»­è´¹åˆ©æ¶¦ç®¡ç†** - è´¹ç”¨é…ç½®ã€åˆ©æ¶¦åˆ†æã€è½¬è´¦ç®¡ç†
3. **APIç›‘æ§ç®¡ç†** - APIç»Ÿè®¡ã€æ€§èƒ½åˆ†æã€é™æµç®¡ç†
4. **åŒºå—é“¾é›†æˆç®¡ç†** - Tatum APIç›‘æ§ã€äº¤æ˜“éªŒè¯ã€åŒæ­¥ç®¡ç†
5. **é«˜çº§ç³»ç»Ÿé…ç½®** - ç¯å¢ƒå˜é‡ã€åŠŸèƒ½å¼€å…³ã€å‚æ•°é…ç½®
6. **æ•°æ®è´¨é‡ç®¡ç†** - æ•°æ®æ£€æŸ¥ã€é—®é¢˜ä¿®å¤ã€è´¨é‡æŠ¥å‘Š

### 1.4 æŠ€æœ¯çº¦æŸ

#### ç°æœ‰æŠ€æœ¯æ ˆ
- **å‰ç«¯**: HTML5, CSS3, JavaScript (åŸç”Ÿ)
- **åç«¯**: Node.js, Express
- **æ•°æ®åº“**: MySQL
- **åŒºå—é“¾**: Tatum SDK (TRONç½‘ç»œ)
- **å®‰å…¨**: KMSå¯†é’¥ç®¡ç†ã€ç¯å¢ƒå˜é‡åŠ å¯†

#### æŠ€æœ¯é€‰å‹åŸåˆ™
- **å…¼å®¹æ€§ä¼˜å…ˆ**: ä¸ç°æœ‰ç³»ç»ŸæŠ€æœ¯æ ˆä¿æŒä¸€è‡´
- **å®‰å…¨æ€§ä¼˜å…ˆ**: é‡‡ç”¨æˆç†Ÿçš„å®‰å…¨æŠ€æœ¯å’Œæœ€ä½³å®è·µ
- **å¯ç»´æŠ¤æ€§**: é€‰æ‹©æ–‡æ¡£å®Œå–„ã€ç¤¾åŒºæ´»è·ƒçš„æŠ€æœ¯
- **æ€§èƒ½ä¼˜åŒ–**: è€ƒè™‘ç³»ç»Ÿæ€§èƒ½å’Œæ‰©å±•æ€§éœ€æ±‚

---

## ğŸ“Š ç¬¬äºŒéƒ¨åˆ†ï¼šéœ€æ±‚åˆ†æ

### 2.1 ç”¨æˆ·è§’è‰²å®šä¹‰

#### è¶…çº§ç®¡ç†å‘˜ (Super Admin)
- **æƒé™èŒƒå›´**: æ‹¥æœ‰ç³»ç»Ÿæ‰€æœ‰æƒé™ï¼Œå¯ä»¥ç®¡ç†å…¶ä»–ç®¡ç†å‘˜
- **ä¸»è¦èŒè´£**: ç³»ç»Ÿé…ç½®ã€ç®¡ç†å‘˜ç®¡ç†ã€å®‰å…¨ç­–ç•¥åˆ¶å®š
- **ä½¿ç”¨åœºæ™¯**: ç³»ç»Ÿåˆå§‹åŒ–ã€é‡å¤§é…ç½®å˜æ›´ã€å®‰å…¨äº‹ä»¶å¤„ç†

#### ç³»ç»Ÿç®¡ç†å‘˜ (Admin)
- **æƒé™èŒƒå›´**: æ‹¥æœ‰å¤§éƒ¨åˆ†ç®¡ç†æƒé™ï¼Œä¸èƒ½ç®¡ç†å…¶ä»–ç®¡ç†å‘˜
- **ä¸»è¦èŒè´£**: æ—¥å¸¸è¿è¥ç®¡ç†ã€ç”¨æˆ·æœåŠ¡ã€æ•°æ®åˆ†æ
- **ä½¿ç”¨åœºæ™¯**: ç”¨æˆ·é—®é¢˜å¤„ç†ã€ä¸šåŠ¡æ•°æ®åˆ†æã€ç³»ç»Ÿç»´æŠ¤

#### è´¢åŠ¡ç®¡ç†å‘˜ (Finance Manager)
- **æƒé™èŒƒå›´**: è´Ÿè´£è´¢åŠ¡ç›¸å…³åŠŸèƒ½ç®¡ç†
- **ä¸»è¦èŒè´£**: èµ„é‡‘ç®¡ç†ã€äº¤æ˜“å®¡æ ¸ã€è´¢åŠ¡æŠ¥è¡¨
- **ä½¿ç”¨åœºæ™¯**: æç°å®¡æ‰¹ã€èµ„é‡‘å½’é›†ã€è´¢åŠ¡å¯¹è´¦

#### è¿è¥ç®¡ç†å‘˜ (Operation Manager)
- **æƒé™èŒƒå›´**: è´Ÿè´£è¿è¥æ´»åŠ¨ç®¡ç†
- **ä¸»è¦èŒè´£**: ä»»åŠ¡ç®¡ç†ã€çº¢åŒ…æ´»åŠ¨ã€ç”¨æˆ·è¿è¥
- **ä½¿ç”¨åœºæ™¯**: æ´»åŠ¨é…ç½®ã€æ•ˆæœåˆ†æã€ç”¨æˆ·æ¿€åŠ±

#### å®¢æœä¸“å‘˜ (Customer Service)
- **æƒé™èŒƒå›´**: è´Ÿè´£ç”¨æˆ·æœåŠ¡å’ŒåŸºç¡€æŸ¥è¯¢
- **ä¸»è¦èŒè´£**: ç”¨æˆ·é—®é¢˜å¤„ç†ã€åŸºç¡€ä¿¡æ¯æŸ¥è¯¢
- **ä½¿ç”¨åœºæ™¯**: ç”¨æˆ·å’¨è¯¢ã€é—®é¢˜æ’æŸ¥ã€ä¿¡æ¯æ ¸å®

#### å®¡è®¡ä¸“å‘˜ (Auditor)
- **æƒé™èŒƒå›´**: è´Ÿè´£å®¡è®¡å’Œç›‘æ§ï¼Œåªè¯»æƒé™
- **ä¸»è¦èŒè´£**: æ“ä½œå®¡è®¡ã€åˆè§„æ£€æŸ¥ã€é£é™©ç›‘æ§
- **ä½¿ç”¨åœºæ™¯**: åˆè§„å®¡æŸ¥ã€é£é™©è¯„ä¼°ã€å®¡è®¡æŠ¥å‘Š

### 2.2 æ ¸å¿ƒåŠŸèƒ½éœ€æ±‚

#### 2.2.1 ç®¡ç†å‘˜è®¤è¯å’Œæƒé™ç®¡ç†

**åŠŸèƒ½æè¿°**:
- ç®¡ç†å‘˜ç™»å½•è®¤è¯ï¼ˆæ”¯æŒåŒå› ç´ è®¤è¯ï¼‰
- åŸºäºè§’è‰²çš„æƒé™æ§åˆ¶ï¼ˆRBACï¼‰
- ä¼šè¯ç®¡ç†å’Œå®‰å…¨é€€å‡º
- æ“ä½œæ—¥å¿—å’Œå®¡è®¡è¿½è¸ª

**æ ¸å¿ƒAPI**:
```javascript
// ç®¡ç†å‘˜è®¤è¯
POST /api/admin/auth/login
POST /api/admin/auth/logout
POST /api/admin/auth/refresh-token
POST /api/admin/auth/enable-2fa

// æƒé™ç®¡ç†
GET /api/admin/permissions
GET /api/admin/roles
POST /api/admin/roles
PUT /api/admin/roles/:id
DELETE /api/admin/roles/:id
```

**æ•°æ®åº“è¡¨**:
- `admin_users` - ç®¡ç†å‘˜ç”¨æˆ·è¡¨
- `admin_roles` - è§’è‰²è¡¨
- `admin_permissions` - æƒé™è¡¨
- `admin_user_roles` - ç”¨æˆ·è§’è‰²å…³è”è¡¨
- `admin_role_permissions` - è§’è‰²æƒé™å…³è”è¡¨

#### 2.2.2 ç”¨æˆ·ç®¡ç†æ¨¡å—

**åŠŸèƒ½æè¿°**:
- ç”¨æˆ·ä¿¡æ¯æŸ¥è¯¢å’Œç¼–è¾‘
- ç”¨æˆ·çŠ¶æ€ç®¡ç†ï¼ˆå¯ç”¨/ç¦ç”¨/å†»ç»“ï¼‰
- ç”¨æˆ·è¡Œä¸ºåˆ†æå’Œé£é™©è¯„ä¼°
- ç”¨æˆ·æ•°æ®å¯¼å‡ºå’ŒæŠ¥è¡¨ç”Ÿæˆ

**æ ¸å¿ƒåŠŸèƒ½**:
1. **ç”¨æˆ·åˆ—è¡¨ç®¡ç†**
   - æ”¯æŒå¤šæ¡ä»¶æœç´¢å’Œç­›é€‰
   - åˆ†é¡µæ˜¾ç¤ºå’Œæ‰¹é‡æ“ä½œ
   - ç”¨æˆ·çŠ¶æ€å®æ—¶æ›´æ–°

2. **ç”¨æˆ·è¯¦æƒ…æŸ¥çœ‹**
   - åŸºæœ¬ä¿¡æ¯ã€é’±åŒ…ä¿¡æ¯ã€äº¤æ˜“è®°å½•
   - ä»»åŠ¡å®Œæˆæƒ…å†µã€çº¢åŒ…å‚ä¸è®°å½•
   - å›¢é˜Ÿå…³ç³»å’Œé‚€è¯·è®°å½•

3. **ç”¨æˆ·æ“ä½œç®¡ç†**
   - ç”¨æˆ·çŠ¶æ€å˜æ›´ï¼ˆå¯ç”¨/ç¦ç”¨/å†»ç»“ï¼‰
   - ç”¨æˆ·ä¿¡æ¯ä¿®æ”¹å’ŒéªŒè¯
   - ç”¨æˆ·è¡Œä¸ºæ—¥å¿—æŸ¥çœ‹

**æ ¸å¿ƒAPI**:
```javascript
// ç”¨æˆ·ç®¡ç†
GET /api/admin/users
GET /api/admin/users/:id
PUT /api/admin/users/:id
POST /api/admin/users/:id/freeze
POST /api/admin/users/:id/unfreeze
GET /api/admin/users/:id/logs
GET /api/admin/users/export
```

#### 2.2.3 é’±åŒ…ç®¡ç†æ¨¡å—

**åŠŸèƒ½æè¿°**:
- é’±åŒ…åœ°å€ç®¡ç†å’Œç›‘æ§
- èµ„é‡‘ä½™é¢å®æ—¶æŸ¥çœ‹
- èµ„é‡‘å½’é›†æ“ä½œç®¡ç†
- é’±åŒ…å¼‚å¸¸æ£€æµ‹å’Œå¤„ç†

**æ ¸å¿ƒåŠŸèƒ½**:
1. **é’±åŒ…æ¦‚è§ˆ**
   - æ€»èµ„é‡‘ç»Ÿè®¡å’Œåˆ†å¸ƒ
   - ä¸»é’±åŒ…å’Œå­åœ°å€çŠ¶æ€
   - èµ„é‡‘æµåŠ¨è¶‹åŠ¿åˆ†æ

2. **é’±åŒ…è¯¦æƒ…ç®¡ç†**
   - å•ä¸ªé’±åŒ…è¯¦ç»†ä¿¡æ¯
   - äº¤æ˜“å†å²å’Œä½™é¢å˜åŒ–
   - åœ°å€æœ‰æ•ˆæ€§éªŒè¯

3. **èµ„é‡‘å½’é›†ç®¡ç†**
   - è‡ªåŠ¨å½’é›†è§„åˆ™é…ç½®
   - æ‰‹åŠ¨å½’é›†æ“ä½œæ‰§è¡Œ
   - å½’é›†è®°å½•å’ŒçŠ¶æ€è·Ÿè¸ª

**æ ¸å¿ƒAPI**:
```javascript
// é’±åŒ…ç®¡ç†
GET /api/admin/wallets
GET /api/admin/wallets/:address
GET /api/admin/wallets/summary
POST /api/admin/wallets/collect-funds
GET /api/admin/wallets/collect-history
PUT /api/admin/wallets/collect-config
```

#### 2.2.4 äº¤æ˜“ç®¡ç†æ¨¡å—

**åŠŸèƒ½æè¿°**:
- å……å€¼å’Œæç°è®°å½•ç®¡ç†
- äº¤æ˜“çŠ¶æ€è·Ÿè¸ªå’Œæ›´æ–°
- å¼‚å¸¸äº¤æ˜“æ£€æµ‹å’Œå¤„ç†
- äº¤æ˜“æ•°æ®åˆ†æå’ŒæŠ¥è¡¨

**æ ¸å¿ƒåŠŸèƒ½**:
1. **äº¤æ˜“è®°å½•ç®¡ç†**
   - å……å€¼è®°å½•æŸ¥è¯¢å’ŒéªŒè¯
   - æç°ç”³è¯·å®¡æ ¸å’Œå¤„ç†
   - äº¤æ˜“çŠ¶æ€å®æ—¶æ›´æ–°

2. **äº¤æ˜“å®¡æ ¸æµç¨‹**
   - å¤§é¢äº¤æ˜“è‡ªåŠ¨æ ‡è®°
   - äººå·¥å®¡æ ¸å’Œæ‰¹å‡†æµç¨‹
   - å®¡æ ¸è®°å½•å’Œå†³ç­–è¿½è¸ª

3. **å¼‚å¸¸äº¤æ˜“å¤„ç†**
   - å¼‚å¸¸æ¨¡å¼è‡ªåŠ¨æ£€æµ‹
   - å¯ç–‘äº¤æ˜“æ ‡è®°å’Œè°ƒæŸ¥
   - é£é™©æ§åˆ¶æªæ–½æ‰§è¡Œ

**æ ¸å¿ƒAPI**:
```javascript
// äº¤æ˜“ç®¡ç†
GET /api/admin/transactions
GET /api/admin/transactions/:id
PUT /api/admin/transactions/:id/approve
PUT /api/admin/transactions/:id/reject
GET /api/admin/transactions/pending
GET /api/admin/transactions/statistics
```

#### 2.2.5 ä»»åŠ¡ç®¡ç†æ¨¡å—

**åŠŸèƒ½æè¿°**:
- ä»»åŠ¡é…ç½®å’Œå‘å¸ƒç®¡ç†
- ä»»åŠ¡å®Œæˆæƒ…å†µç»Ÿè®¡
- å¥–åŠ±å‘æ”¾å’Œè®°å½•ç®¡ç†
- ä»»åŠ¡æ•ˆæœåˆ†æå’Œä¼˜åŒ–

**æ ¸å¿ƒåŠŸèƒ½**:
1. **ä»»åŠ¡é…ç½®ç®¡ç†**
   - ä»»åŠ¡ç±»å‹å’Œå‚æ•°è®¾ç½®
   - å¥–åŠ±è§„åˆ™å’Œæ¡ä»¶é…ç½®
   - ä»»åŠ¡æœ‰æ•ˆæœŸå’Œé™åˆ¶è®¾ç½®

2. **ä»»åŠ¡æ‰§è¡Œç›‘æ§**
   - ä»»åŠ¡å®Œæˆæƒ…å†µå®æ—¶ç»Ÿè®¡
   - ç”¨æˆ·å‚ä¸åº¦åˆ†æ
   - ä»»åŠ¡æ•ˆæœè¯„ä¼°

3. **å¥–åŠ±ç®¡ç†**
   - å¥–åŠ±å‘æ”¾è®°å½•æŸ¥è¯¢
   - å¥–åŠ±è§„åˆ™è°ƒæ•´å’Œä¼˜åŒ–
   - å¼‚å¸¸å¥–åŠ±å¤„ç†

**æ ¸å¿ƒAPI**:
```javascript
// ä»»åŠ¡ç®¡ç†
GET /api/admin/tasks
POST /api/admin/tasks
PUT /api/admin/tasks/:id
DELETE /api/admin/tasks/:id
GET /api/admin/tasks/:id/statistics
GET /api/admin/tasks/rewards
```

#### 2.2.6 çº¢åŒ…ç®¡ç†æ¨¡å—

**åŠŸèƒ½æè¿°**:
- çº¢åŒ…æ´»åŠ¨åˆ›å»ºå’Œé…ç½®
- çº¢åŒ…å‘æ”¾å’Œé¢†å–ç®¡ç†
- æ´»åŠ¨æ•ˆæœåˆ†æå’ŒæŠ¥è¡¨
- çº¢åŒ…èµ„é‡‘ç®¡ç†å’Œå¯¹è´¦

**æ ¸å¿ƒåŠŸèƒ½**:
1. **çº¢åŒ…æ´»åŠ¨ç®¡ç†**
   - æ´»åŠ¨åˆ›å»ºå’Œå‚æ•°é…ç½®
   - çº¢åŒ…ç±»å‹å’Œè§„åˆ™è®¾ç½®
   - æ´»åŠ¨æ—¶é—´å’ŒèŒƒå›´æ§åˆ¶

2. **çº¢åŒ…å‘æ”¾ç›‘æ§**
   - çº¢åŒ…å‘æ”¾çŠ¶æ€è·Ÿè¸ª
   - é¢†å–æƒ…å†µå®æ—¶ç»Ÿè®¡
   - å¼‚å¸¸çº¢åŒ…å¤„ç†

3. **æ´»åŠ¨æ•ˆæœåˆ†æ**
   - å‚ä¸ç”¨æˆ·æ•°æ®åˆ†æ
   - æ´»åŠ¨ROIè®¡ç®—
   - æ•ˆæœå¯¹æ¯”å’Œä¼˜åŒ–å»ºè®®

**æ ¸å¿ƒAPI**:
```javascript
// çº¢åŒ…ç®¡ç†
GET /api/admin/redpackets
POST /api/admin/redpackets
PUT /api/admin/redpackets/:id
DELETE /api/admin/redpackets/:id
GET /api/admin/redpackets/:id/statistics
GET /api/admin/redpackets/analytics
```

#### 2.2.7 å›¢é˜Ÿç®¡ç†æ¨¡å—

**åŠŸèƒ½æè¿°**:
- å›¢é˜Ÿç»“æ„æŸ¥çœ‹å’Œç®¡ç†
- é‚€è¯·å…³ç³»è¿½è¸ªå’Œåˆ†æ
- å›¢é˜Ÿä¸šç»©ç»Ÿè®¡å’Œæ’å
- å›¢é˜Ÿå¥–åŠ±è®¡ç®—å’Œå‘æ”¾

**æ ¸å¿ƒåŠŸèƒ½**:
1. **å›¢é˜Ÿç»“æ„ç®¡ç†**
   - å›¢é˜Ÿå±‚çº§å…³ç³»å±•ç¤º
   - é‚€è¯·é“¾è·¯è¿½è¸ª
   - å›¢é˜Ÿæˆå‘˜ç®¡ç†

2. **å›¢é˜Ÿç»Ÿè®¡åˆ†æ**
   - å›¢é˜Ÿè§„æ¨¡å’Œå¢é•¿è¶‹åŠ¿
   - å›¢é˜Ÿæ´»è·ƒåº¦åˆ†æ
   - ä¸šç»©è´¡çŒ®ç»Ÿè®¡

3. **å›¢é˜Ÿå¥–åŠ±ç®¡ç†**
   - å›¢é˜Ÿå¥–åŠ±è§„åˆ™é…ç½®
   - å¥–åŠ±è®¡ç®—å’Œå‘æ”¾
   - å¥–åŠ±è®°å½•æŸ¥è¯¢

**æ ¸å¿ƒAPI**:
```javascript
// å›¢é˜Ÿç®¡ç†
GET /api/admin/teams
GET /api/admin/teams/:id
GET /api/admin/teams/:id/members
GET /api/admin/teams/statistics
GET /api/admin/teams/rewards
PUT /api/admin/teams/reward-config
```

#### 2.2.8 æ’è¡Œæ¦œç®¡ç†æ¨¡å—

**åŠŸèƒ½æè¿°**:
- æ’è¡Œæ¦œè§„åˆ™é…ç½®å’Œç®¡ç†
- æ’åæ•°æ®è®¡ç®—å’Œæ›´æ–°
- æ’è¡Œæ¦œå¥–åŠ±è®¾ç½®å’Œå‘æ”¾
- æ’è¡Œæ¦œæ•ˆæœåˆ†æå’Œä¼˜åŒ–

**æ ¸å¿ƒåŠŸèƒ½**:
1. **æ’è¡Œæ¦œé…ç½®**
   - æ’è¡Œè§„åˆ™å’Œè®¡ç®—æ–¹å¼
   - æ’è¡Œå‘¨æœŸå’Œé‡ç½®è§„åˆ™
   - å¥–åŠ±ç­‰çº§å’Œå¥–å“è®¾ç½®

2. **æ’åæ•°æ®ç®¡ç†**
   - æ’åæ•°æ®å®æ—¶æ›´æ–°
   - å†å²æ’åè®°å½•æŸ¥è¯¢
   - æ’åå¼‚å¸¸æ£€æµ‹å’Œå¤„ç†

3. **å¥–åŠ±å‘æ”¾ç®¡ç†**
   - è‡ªåŠ¨å¥–åŠ±å‘æ”¾è§„åˆ™
   - æ‰‹åŠ¨å¥–åŠ±è°ƒæ•´
   - å¥–åŠ±å‘æ”¾è®°å½•è¿½è¸ª

**æ ¸å¿ƒAPI**:
```javascript
// æ’è¡Œæ¦œç®¡ç†
GET /api/admin/rankings
POST /api/admin/rankings
PUT /api/admin/rankings/:id
DELETE /api/admin/rankings/:id
GET /api/admin/rankings/:id/data
POST /api/admin/rankings/:id/reset
```

#### 2.2.9 ç³»ç»Ÿç›‘æ§æ¨¡å—

**åŠŸèƒ½æè¿°**:
- ç³»ç»Ÿæ€§èƒ½ç›‘æ§å’Œå‘Šè­¦
- ä¸šåŠ¡æŒ‡æ ‡ç»Ÿè®¡å’Œåˆ†æ
- æ—¥å¿—ç®¡ç†å’ŒæŸ¥è¯¢
- ç³»ç»Ÿå¥åº·çŠ¶æ€æ£€æŸ¥

**æ ¸å¿ƒåŠŸèƒ½**:
1. **æ€§èƒ½ç›‘æ§**
   - ç³»ç»Ÿèµ„æºä½¿ç”¨æƒ…å†µ
   - APIå“åº”æ—¶é—´ç»Ÿè®¡
   - æ•°æ®åº“æ€§èƒ½ç›‘æ§

2. **ä¸šåŠ¡ç›‘æ§**
   - å…³é”®ä¸šåŠ¡æŒ‡æ ‡ç»Ÿè®¡
   - å¼‚å¸¸æƒ…å†µå‘Šè­¦
   - è¶‹åŠ¿åˆ†æå’Œé¢„æµ‹

3. **æ—¥å¿—ç®¡ç†**
   - ç³»ç»Ÿæ—¥å¿—æŸ¥è¯¢å’Œåˆ†æ
   - é”™è¯¯æ—¥å¿—ç»Ÿè®¡å’Œå¤„ç†
   - æ“ä½œæ—¥å¿—å®¡è®¡

**æ ¸å¿ƒAPI**:
```javascript
// ç³»ç»Ÿç›‘æ§
GET /api/admin/monitoring/system
GET /api/admin/monitoring/business
GET /api/admin/monitoring/logs
GET /api/admin/monitoring/alerts
POST /api/admin/monitoring/alert-rules
```

### 2.3 è¡¥å……åŠŸèƒ½éœ€æ±‚

#### 2.3.1 å®æ—¶é€šä¿¡ç®¡ç†æ¨¡å—

**ä¸šåŠ¡ä»·å€¼**:
- è§£å†³WebSocketè¿æ¥çŠ¶æ€ç›‘æ§å’Œç®¡ç†é—®é¢˜
- æä¾›å®æ—¶æ¶ˆæ¯æ¨é€çš„å…¨ç”Ÿå‘½å‘¨æœŸç®¡ç†
- ç¡®ä¿ç³»ç»Ÿé€šçŸ¥çš„å¯é æ€§å’Œå¯è¿½æº¯æ€§

**åŠŸèƒ½æè¿°**:
- **è¿æ¥çŠ¶æ€ç›‘æ§**: å®æ—¶æŸ¥çœ‹WebSocketè¿æ¥æ•°é‡ã€çŠ¶æ€ã€åœ°ç†åˆ†å¸ƒ
- **æ¶ˆæ¯æ¨é€ç®¡ç†**: ç®¡ç†å€’è®¡æ—¶æ›´æ–°ã€çº¢åŒ…é€šçŸ¥ã€ä»»åŠ¡å®Œæˆé€šçŸ¥ç­‰
- **é€šçŸ¥å†å²è®°å½•**: æŸ¥çœ‹æ‰€æœ‰æ¨é€æ¶ˆæ¯çš„å‘é€çŠ¶æ€å’Œæ¥æ”¶ç¡®è®¤
- **è¿æ¥å¼‚å¸¸å¤„ç†**: è‡ªåŠ¨æ£€æµ‹å’Œå¤„ç†è¿æ¥å¼‚å¸¸ï¼Œæä¾›é‡è¿æœºåˆ¶

**æ ¸å¿ƒAPI**:
```javascript
// å®æ—¶é€šä¿¡ç®¡ç†
GET /api/admin/websocket/connections
GET /api/admin/websocket/messages
POST /api/admin/websocket/broadcast
PUT /api/admin/websocket/config
```

#### 2.3.2 æ‰‹ç»­è´¹åˆ©æ¶¦ç®¡ç†æ¨¡å—

**ä¸šåŠ¡ä»·å€¼**:
- è§£å†³æ‰‹ç»­è´¹é…ç½®å’Œåˆ©æ¶¦åˆ†æçš„ç®¡ç†é—®é¢˜
- æä¾›é€æ˜çš„è´¹ç”¨ç»“æ„å’Œåˆ©æ¶¦è¿½è¸ª
- æ”¯æŒåŠ¨æ€è°ƒæ•´æ‰‹ç»­è´¹ç­–ç•¥

**åŠŸèƒ½æè¿°**:
- **æ‰‹ç»­è´¹é…ç½®ç®¡ç†**: è®¾ç½®å›ºå®šè´¹ç”¨ã€ç™¾åˆ†æ¯”è´¹ç”¨ã€æœ€ä½è´¹ç”¨ç­‰å‚æ•°
- **åˆ©æ¶¦è®¡ç®—åˆ†æ**: å®æ—¶è®¡ç®—å®¢æˆ·æ‰‹ç»­è´¹ä¸å®é™…æˆæœ¬çš„å·®é¢
- **åˆ©æ¶¦è½¬è´¦ç®¡ç†**: ç®¡ç†åˆ©æ¶¦è½¬è´¦åˆ°æŒ‡å®šé’±åŒ…çš„æ“ä½œ
- **è´¹ç”¨ç»Ÿè®¡æŠ¥è¡¨**: ç”Ÿæˆæ‰‹ç»­è´¹æ”¶å…¥å’Œåˆ©æ¶¦åˆ†ææŠ¥è¡¨

**æ ¸å¿ƒAPI**:
```javascript
// æ‰‹ç»­è´¹åˆ©æ¶¦ç®¡ç†
GET /api/admin/fee-config
PUT /api/admin/fee-config
GET /api/admin/profit-stats
GET /api/admin/profit-records
POST /api/admin/profit-transfer
```

#### 2.3.3 APIç›‘æ§ç®¡ç†æ¨¡å—

**ä¸šåŠ¡ä»·å€¼**:
- è§£å†³APIè°ƒç”¨ç›‘æ§å’Œæ€§èƒ½åˆ†æé—®é¢˜
- æä¾›APIä½¿ç”¨æƒ…å†µçš„å…¨é¢æ´å¯Ÿ
- æ”¯æŒAPIé™æµå’Œå®‰å…¨é˜²æŠ¤ç­–ç•¥

**åŠŸèƒ½æè¿°**:
- **APIè°ƒç”¨ç»Ÿè®¡**: ç›‘æ§å„APIç«¯ç‚¹çš„è°ƒç”¨é¢‘ç‡ã€å“åº”æ—¶é—´ã€æˆåŠŸç‡
- **é€Ÿç‡é™åˆ¶ç®¡ç†**: é…ç½®å’Œç®¡ç†ä¸åŒAPIçš„è°ƒç”¨é¢‘ç‡é™åˆ¶
- **APIæ€§èƒ½åˆ†æ**: åˆ†æAPIå“åº”æ—¶é—´è¶‹åŠ¿ï¼Œè¯†åˆ«æ€§èƒ½ç“¶é¢ˆ
- **å¼‚å¸¸è°ƒç”¨æ£€æµ‹**: æ£€æµ‹å¼‚å¸¸çš„APIè°ƒç”¨æ¨¡å¼ï¼Œæä¾›å®‰å…¨å‘Šè­¦

**æ ¸å¿ƒAPI**:
```javascript
// APIç›‘æ§ç®¡ç†
GET /api/admin/api-stats
GET /api/admin/rate-limits
PUT /api/admin/rate-limits
GET /api/admin/api-performance
GET /api/admin/api-alerts
```

#### 2.3.4 åŒºå—é“¾é›†æˆç®¡ç†æ¨¡å—

**ä¸šåŠ¡ä»·å€¼**:
- è§£å†³åŒºå—é“¾æœåŠ¡é›†æˆçŠ¶æ€ç›‘æ§é—®é¢˜
- æä¾›Tatum APIå’ŒåŒºå—é“¾äº¤æ˜“çš„å…¨é¢ç®¡ç†
- ç¡®ä¿åŒºå—é“¾æ•°æ®çš„å‡†ç¡®æ€§å’ŒåŠæ—¶æ€§

**åŠŸèƒ½æè¿°**:
- **Tatum APIçŠ¶æ€ç›‘æ§**: ç›‘æ§Tatum APIçš„è¿æ¥çŠ¶æ€ã€å“åº”æ—¶é—´ã€é”™è¯¯ç‡
- **åŒºå—é“¾äº¤æ˜“éªŒè¯**: ç®¡ç†å’ŒéªŒè¯åŒºå—é“¾äº¤æ˜“çš„çŠ¶æ€å’Œç»“æœ
- **Webhookç®¡ç†**: ç®¡ç†æ¥è‡ªTatumçš„Webhooké€šçŸ¥å’Œå¤„ç†çŠ¶æ€
- **åŒæ­¥çŠ¶æ€ç®¡ç†**: ç®¡ç†æœ¬åœ°æ•°æ®ä¸åŒºå—é“¾æ•°æ®çš„åŒæ­¥çŠ¶æ€

**æ ¸å¿ƒAPI**:
```javascript
// åŒºå—é“¾é›†æˆç®¡ç†
GET /api/admin/tatum-status
GET /api/admin/blockchain-txs
GET /api/admin/webhooks
POST /api/admin/sync-blockchain
```

#### 2.3.5 é«˜çº§ç³»ç»Ÿé…ç½®ç®¡ç†æ¨¡å—

**ä¸šåŠ¡ä»·å€¼**:
- è§£å†³ç³»ç»Ÿå‚æ•°åŠ¨æ€é…ç½®å’Œç®¡ç†é—®é¢˜
- æä¾›çµæ´»çš„ç³»ç»Ÿè¡Œä¸ºæ§åˆ¶èƒ½åŠ›
- æ”¯æŒä¸åŒç¯å¢ƒçš„é…ç½®ç®¡ç†

**åŠŸèƒ½æè¿°**:
- **ç¯å¢ƒå˜é‡ç®¡ç†**: å®‰å…¨ç®¡ç†ç³»ç»Ÿç¯å¢ƒå˜é‡å’Œé…ç½®å‚æ•°
- **åŠŸèƒ½å¼€å…³ç®¡ç†**: æ§åˆ¶ç³»ç»ŸåŠŸèƒ½çš„å¯ç”¨å’Œç¦ç”¨
- **ç³»ç»Ÿå‚æ•°é…ç½®**: ç®¡ç†è¶…æ—¶æ—¶é—´ã€é‡è¯•æ¬¡æ•°ç­‰ç³»ç»Ÿå‚æ•°
- **é…ç½®ç‰ˆæœ¬ç®¡ç†**: è·Ÿè¸ªé…ç½®å˜æ›´å†å²ï¼Œæ”¯æŒé…ç½®å›æ»š

**æ ¸å¿ƒAPI**:
```javascript
// é«˜çº§ç³»ç»Ÿé…ç½®ç®¡ç†
GET /api/admin/system-config
PUT /api/admin/system-config
GET /api/admin/feature-flags
PUT /api/admin/feature-flags
GET /api/admin/config-history
POST /api/admin/config-rollback
```

#### 2.3.6 æ•°æ®è´¨é‡ç®¡ç†æ¨¡å—

**ä¸šåŠ¡ä»·å€¼**:
- è§£å†³æ•°æ®ä¸€è‡´æ€§å’Œå®Œæ•´æ€§ç›‘æ§é—®é¢˜
- æä¾›æ•°æ®è´¨é‡è¯„ä¼°å’Œä¿®å¤èƒ½åŠ›
- ç¡®ä¿ä¸šåŠ¡æ•°æ®çš„å‡†ç¡®æ€§å’Œå¯é æ€§

**åŠŸèƒ½æè¿°**:
- **æ•°æ®ä¸€è‡´æ€§æ£€æŸ¥**: æ£€æŸ¥ä¸åŒæ•°æ®æºä¹‹é—´çš„æ•°æ®ä¸€è‡´æ€§
- **æ•°æ®å®Œæ•´æ€§éªŒè¯**: éªŒè¯å…³é”®ä¸šåŠ¡æ•°æ®çš„å®Œæ•´æ€§
- **æ•°æ®è´¨é‡æŠ¥å‘Š**: ç”Ÿæˆæ•°æ®è´¨é‡è¯„ä¼°æŠ¥å‘Šå’Œè¶‹åŠ¿åˆ†æ
- **æ•°æ®ä¿®å¤å·¥å…·**: æä¾›æ•°æ®å¼‚å¸¸çš„ä¿®å¤å’Œæ¸…ç†å·¥å…·

**æ ¸å¿ƒAPI**:
```javascript
// æ•°æ®è´¨é‡ç®¡ç†
GET /api/admin/data-quality
POST /api/admin/data-check
GET /api/admin/data-issues
POST /api/admin/data-repair
```

---

## ğŸ—ï¸ ç¬¬ä¸‰éƒ¨åˆ†ï¼šæŠ€æœ¯æ¶æ„

### 3.1 æ•´ä½“æ¶æ„è®¾è®¡

#### 3.1.1 ç³»ç»Ÿæ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ç”¨æˆ·å±‚                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ è¶…çº§ç®¡ç†å‘˜  â”‚  â”‚ ç³»ç»Ÿç®¡ç†å‘˜  â”‚  â”‚ ä¸šåŠ¡ç®¡ç†å‘˜  â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      å‰ç«¯å±•ç¤ºå±‚                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚   React     â”‚  â”‚  Ant Design â”‚  â”‚   Redux     â”‚        â”‚
â”‚  â”‚   ç»„ä»¶åº“    â”‚  â”‚   UIç»„ä»¶    â”‚  â”‚   çŠ¶æ€ç®¡ç†  â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ç½‘å…³å±‚                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚   Nginx     â”‚  â”‚    SSL      â”‚  â”‚   è´Ÿè½½å‡è¡¡  â”‚        â”‚
â”‚  â”‚   åå‘ä»£ç†  â”‚  â”‚    è¯ä¹¦     â”‚  â”‚             â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      åº”ç”¨å±‚                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚   Node.js   â”‚  â”‚   Express   â”‚  â”‚   Socket.io â”‚        â”‚
â”‚  â”‚   è¿è¡Œæ—¶     â”‚  â”‚   Webæ¡†æ¶   â”‚  â”‚   å®æ—¶é€šä¿¡  â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      æ•°æ®å±‚                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚    MySQL    â”‚  â”‚    Redis    â”‚  â”‚  InfluxDB   â”‚        â”‚
â”‚  â”‚   ä¸»æ•°æ®åº“  â”‚  â”‚    ç¼“å­˜     â”‚  â”‚   æ—¶åºæ•°æ®  â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    åŸºç¡€è®¾æ–½å±‚                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚   Docker    â”‚  â”‚ Kubernetes  â”‚  â”‚   ç›‘æ§å‘Šè­¦  â”‚        â”‚
â”‚  â”‚   å®¹å™¨åŒ–    â”‚  â”‚   ç¼–æ’      â”‚  â”‚  Prometheus â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 3.1.2 æŠ€æœ¯é€‰å‹åŸåˆ™

1. **å…¼å®¹æ€§ä¼˜å…ˆ**: ä¸ç°æœ‰ç³»ç»ŸæŠ€æœ¯æ ˆä¿æŒä¸€è‡´
2. **å®‰å…¨æ€§ä¼˜å…ˆ**: é‡‡ç”¨æˆç†Ÿçš„å®‰å…¨æŠ€æœ¯å’Œæœ€ä½³å®è·µ
3. **å¯ç»´æŠ¤æ€§**: é€‰æ‹©æ–‡æ¡£å®Œå–„ã€ç¤¾åŒºæ´»è·ƒçš„æŠ€æœ¯
4. **æ€§èƒ½ä¼˜åŒ–**: è€ƒè™‘ç³»ç»Ÿæ€§èƒ½å’Œæ‰©å±•æ€§éœ€æ±‚
5. **æˆæœ¬æ§åˆ¶**: åœ¨æ»¡è¶³éœ€æ±‚çš„å‰æä¸‹æ§åˆ¶æŠ€æœ¯æˆæœ¬

### 3.2 å‰ç«¯æŠ€æœ¯æ¶æ„

#### 3.2.1 æŠ€æœ¯æ ˆé€‰æ‹©

**æ ¸å¿ƒæ¡†æ¶**:
- **React 18**: ç°ä»£åŒ–çš„å‰ç«¯æ¡†æ¶ï¼Œæ”¯æŒå¹¶å‘ç‰¹æ€§
- **TypeScript**: ç±»å‹å®‰å…¨ï¼Œæé«˜ä»£ç è´¨é‡å’Œå¼€å‘æ•ˆç‡
- **Vite**: å¿«é€Ÿçš„æ„å»ºå·¥å…·ï¼Œä¼˜ç§€çš„å¼€å‘ä½“éªŒ

**UIç»„ä»¶åº“**:
- **Ant Design**: ä¼ä¸šçº§UIè®¾è®¡è¯­è¨€å’Œç»„ä»¶åº“
- **Ant Design Pro**: å¼€ç®±å³ç”¨çš„ä¸­å°å‰ç«¯/è®¾è®¡è§£å†³æ–¹æ¡ˆ
- **Ant Design Charts**: æ•°æ®å¯è§†åŒ–å›¾è¡¨åº“

**çŠ¶æ€ç®¡ç†**:
- **Redux Toolkit**: ç°ä»£åŒ–çš„ReduxçŠ¶æ€ç®¡ç†
- **React Query**: æœåŠ¡ç«¯çŠ¶æ€ç®¡ç†å’Œæ•°æ®è·å–
- **Zustand**: è½»é‡çº§çš„å®¢æˆ·ç«¯çŠ¶æ€ç®¡ç†

**è·¯ç”±å’Œå¯¼èˆª**:
- **React Router**: å£°æ˜å¼è·¯ç”±ç®¡ç†
- **React Helmet**: åŠ¨æ€ä¿®æ”¹é¡µé¢å¤´éƒ¨ä¿¡æ¯

#### 3.2.2 é¡¹ç›®ç»“æ„

```
src/
â”œâ”€â”€ components/          # é€šç”¨ç»„ä»¶
â”‚   â”œâ”€â”€ Layout/         # å¸ƒå±€ç»„ä»¶
â”‚   â”œâ”€â”€ Charts/         # å›¾è¡¨ç»„ä»¶
â”‚   â”œâ”€â”€ Forms/          # è¡¨å•ç»„ä»¶
â”‚   â””â”€â”€ Common/         # é€šç”¨ç»„ä»¶
â”œâ”€â”€ pages/              # é¡µé¢ç»„ä»¶
â”‚   â”œâ”€â”€ Dashboard/      # ä»ªè¡¨æ¿
â”‚   â”œâ”€â”€ Users/          # ç”¨æˆ·ç®¡ç†
â”‚   â”œâ”€â”€ Wallets/        # é’±åŒ…ç®¡ç†
â”‚   â”œâ”€â”€ Transactions/   # äº¤æ˜“ç®¡ç†
â”‚   â”œâ”€â”€ Tasks/          # ä»»åŠ¡ç®¡ç†
â”‚   â”œâ”€â”€ RedPackets/     # çº¢åŒ…ç®¡ç†
â”‚   â”œâ”€â”€ Teams/          # å›¢é˜Ÿç®¡ç†
â”‚   â”œâ”€â”€ Rankings/       # æ’è¡Œæ¦œç®¡ç†
â”‚   â”œâ”€â”€ Monitoring/     # ç³»ç»Ÿç›‘æ§
â”‚   â””â”€â”€ Settings/       # ç³»ç»Ÿè®¾ç½®
â”œâ”€â”€ services/           # APIæœåŠ¡
â”‚   â”œâ”€â”€ api.ts          # APIé…ç½®
â”‚   â”œâ”€â”€ auth.ts         # è®¤è¯æœåŠ¡
â”‚   â”œâ”€â”€ users.ts        # ç”¨æˆ·æœåŠ¡
â”‚   â””â”€â”€ ...
â”œâ”€â”€ store/              # çŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ index.ts        # Storeé…ç½®
â”‚   â”œâ”€â”€ slices/         # Reduxåˆ‡ç‰‡
â”‚   â””â”€â”€ queries/        # React Query
â”œâ”€â”€ utils/              # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ request.ts      # è¯·æ±‚å°è£…
â”‚   â”œâ”€â”€ auth.ts         # è®¤è¯å·¥å…·
â”‚   â”œâ”€â”€ format.ts       # æ ¼å¼åŒ–å·¥å…·
â”‚   â””â”€â”€ constants.ts    # å¸¸é‡å®šä¹‰
â”œâ”€â”€ hooks/              # è‡ªå®šä¹‰Hook
â”œâ”€â”€ types/              # TypeScriptç±»å‹å®šä¹‰
â””â”€â”€ assets/             # é™æ€èµ„æº
```

#### 3.2.3 æ ¸å¿ƒç»„ä»¶è®¾è®¡

**AdminLayout å¸ƒå±€ç»„ä»¶**:
```typescript
/**
 * ç®¡ç†åå°ä¸»å¸ƒå±€ç»„ä»¶
 */
interface AdminLayoutProps {
  children: React.ReactNode;
}

const AdminLayout: React.FC<AdminLayoutProps> = ({ children }) => {
  const [collapsed, setCollapsed] = useState(false);
  const { user, permissions } = useAuth();
  
  const menuItems = useMemo(() => [
    {
      key: 'dashboard',
      icon: <DashboardOutlined />,
      label: 'ä»ªè¡¨æ¿',
      path: '/dashboard'
    },
    {
      key: 'users',
      icon: <UserOutlined />,
      label: 'ç”¨æˆ·ç®¡ç†',
      path: '/users',
      permission: 'user:read'
    },
    {
      key: 'wallets',
      icon: <WalletOutlined />,
      label: 'é’±åŒ…ç®¡ç†',
      path: '/wallets',
      permission: 'wallet:read'
    },
    // ... å…¶ä»–èœå•é¡¹
  ].filter(item => !item.permission || hasPermission(permissions, item.permission)), [permissions]);
  
  return (
    <Layout style={{ minHeight: '100vh' }}>
      <Sider collapsible collapsed={collapsed} onCollapse={setCollapsed}>
        <div className="logo" />
        <Menu
          theme="dark"
          defaultSelectedKeys={['dashboard']}
          mode="inline"
          items={menuItems}
        />
      </Sider>
      <Layout>
        <Header>
          <AdminHeader user={user} />
        </Header>
        <Content style={{ margin: '16px' }}>
          {children}
        </Content>
      </Layout>
    </Layout>
  );
};
```

**Redux Store é…ç½®**:
```typescript
/**
 * Redux Storeé…ç½®
 */
import { configureStore } from '@reduxjs/toolkit';
import { persistStore, persistReducer } from 'redux-persist';
import storage from 'redux-persist/lib/storage';

// åˆ‡ç‰‡å¯¼å…¥
import authSlice from './slices/authSlice';
import usersSlice from './slices/usersSlice';
import walletsSlice from './slices/walletsSlice';
import transactionsSlice from './slices/transactionsSlice';
import monitoringSlice from './slices/monitoringSlice';
import notificationsSlice from './slices/notificationsSlice';

// æŒä¹…åŒ–é…ç½®
const persistConfig = {
  key: 'root',
  storage,
  whitelist: ['auth'] // åªæŒä¹…åŒ–è®¤è¯çŠ¶æ€
};

const rootReducer = {
  auth: persistReducer(persistConfig, authSlice),
  users: usersSlice,
  wallets: walletsSlice,
  transactions: transactionsSlice,
  monitoring: monitoringSlice,
  notifications: notificationsSlice
};

export const store = configureStore({
  reducer: rootReducer,
  middleware: (getDefaultMiddleware) =>
    getDefaultMiddleware({
      serializableCheck: {
        ignoredActions: ['persist/PERSIST', 'persist/REHYDRATE']
      }
    })
});

export const persistor = persistStore(store);
export type RootState = ReturnType<typeof store.getState>;
export type AppDispatch = typeof store.dispatch;
```

### 3.3 åç«¯æŠ€æœ¯æ¶æ„

#### 3.3.1 æŠ€æœ¯æ ˆé€‰æ‹©

**æ ¸å¿ƒæ¡†æ¶**:
- **Node.js**: JavaScriptè¿è¡Œæ—¶ç¯å¢ƒ
- **Express.js**: Webåº”ç”¨æ¡†æ¶
- **TypeScript**: ç±»å‹å®‰å…¨çš„JavaScriptè¶…é›†

**æ•°æ®åº“**:
- **MySQL**: ä¸»æ•°æ®åº“ï¼Œå­˜å‚¨ä¸šåŠ¡æ•°æ®
- **Redis**: ç¼“å­˜æ•°æ®åº“ï¼Œå­˜å‚¨ä¼šè¯å’Œä¸´æ—¶æ•°æ®
- **InfluxDB**: æ—¶åºæ•°æ®åº“ï¼Œå­˜å‚¨ç›‘æ§å’Œç»Ÿè®¡æ•°æ®

**æ¶ˆæ¯é˜Ÿåˆ—**:
- **Bull Queue**: åŸºäºRedisçš„ä½œä¸šé˜Ÿåˆ—
- **Socket.io**: å®æ—¶é€šä¿¡æ¡†æ¶

**å·¥å…·åº“**:
- **Joi**: æ•°æ®éªŒè¯åº“
- **bcrypt**: å¯†ç å“ˆå¸Œåº“
- **jsonwebtoken**: JWTä»¤ç‰Œåº“
- **speakeasy**: åŒå› ç´ è®¤è¯åº“

#### 3.3.2 é¡¹ç›®ç»“æ„

```
src/
â”œâ”€â”€ controllers/        # æ§åˆ¶å™¨
â”‚   â”œâ”€â”€ authController.ts
â”‚   â”œâ”€â”€ userController.ts
â”‚   â”œâ”€â”€ walletController.ts
â”‚   â””â”€â”€ ...
â”œâ”€â”€ services/          # ä¸šåŠ¡æœåŠ¡
â”‚   â”œâ”€â”€ authService.ts
â”‚   â”œâ”€â”€ userService.ts
â”‚   â”œâ”€â”€ walletService.ts
â”‚   â””â”€â”€ ...
â”œâ”€â”€ models/            # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ User.ts
â”‚   â”œâ”€â”€ Wallet.ts
â”‚   â”œâ”€â”€ Transaction.ts
â”‚   â””â”€â”€ ...
â”œâ”€â”€ middleware/        # ä¸­é—´ä»¶
â”‚   â”œâ”€â”€ auth.ts
â”‚   â”œâ”€â”€ validation.ts
â”‚   â”œâ”€â”€ rateLimit.ts
â”‚   â””â”€â”€ ...
â”œâ”€â”€ routes/            # è·¯ç”±å®šä¹‰
â”‚   â”œâ”€â”€ auth.ts
â”‚   â”œâ”€â”€ users.ts
â”‚   â”œâ”€â”€ wallets.ts
â”‚   â””â”€â”€ ...
â”œâ”€â”€ utils/             # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ database.ts
â”‚   â”œâ”€â”€ redis.ts
â”‚   â”œâ”€â”€ encryption.ts
â”‚   â””â”€â”€ ...
â”œâ”€â”€ config/            # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ database.ts
â”‚   â”œâ”€â”€ redis.ts
â”‚   â””â”€â”€ app.ts
â”œâ”€â”€ jobs/              # åå°ä»»åŠ¡
â”‚   â”œâ”€â”€ fundCollection.ts
â”‚   â”œâ”€â”€ dataSync.ts
â”‚   â””â”€â”€ ...
â”œâ”€â”€ validators/        # æ•°æ®éªŒè¯
â”‚   â”œâ”€â”€ userValidator.ts
â”‚   â”œâ”€â”€ walletValidator.ts
â”‚   â””â”€â”€ ...
â””â”€â”€ app.ts            # åº”ç”¨å…¥å£
```

#### 3.3.3 æ ¸å¿ƒæœåŠ¡è®¾è®¡

**è®¤è¯æˆæƒæœåŠ¡**:
```typescript
/**
 * è®¤è¯æˆæƒæœåŠ¡
 */
class AuthService {
  /**
   * ç®¡ç†å‘˜ç™»å½•
   */
  async login(username: string, password: string, totpCode?: string) {
    // 1. éªŒè¯ç”¨æˆ·åå¯†ç 
    const user = await User.findOne({ username });
    if (!user || !await bcrypt.compare(password, user.passwordHash)) {
      throw new AuthenticationError('ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯');
    }
    
    // 2. æ£€æŸ¥è´¦æˆ·çŠ¶æ€
    if (user.status !== 'active') {
      throw new AuthenticationError('è´¦æˆ·å·²è¢«ç¦ç”¨');
    }
    
    // 3. åŒå› ç´ è®¤è¯
    if (user.twoFactorEnabled) {
      if (!totpCode) {
        throw new TwoFactorRequiredError('éœ€è¦åŒå› ç´ è®¤è¯');
      }
      
      const isValidTotp = speakeasy.totp.verify({
        secret: user.twoFactorSecret,
        encoding: 'base32',
        token: totpCode,
        window: 2
      });
      
      if (!isValidTotp) {
        throw new AuthenticationError('åŒå› ç´ è®¤è¯ç é”™è¯¯');
      }
    }
    
    // 4. ç”Ÿæˆä»¤ç‰Œ
    const tokens = this.generateTokens(user);
    
    // 5. è®°å½•ç™»å½•æ—¥å¿—
    await this.logLoginAttempt(user.id, 'success');
    
    return {
      user: this.sanitizeUserData(user),
      tokens,
      permissions: await this.getUserPermissions(user.id)
    };
  }
  
  /**
   * ç”Ÿæˆè®¿é—®ä»¤ç‰Œ
   */
  private generateTokens(user: AdminUser) {
    const payload = {
      userId: user.id,
      username: user.username,
      sessionId: crypto.randomUUID()
    };
    
    const accessToken = jwt.sign(payload, process.env.JWT_SECRET!, {
      expiresIn: '15m'
    });
    
    const refreshToken = jwt.sign(
      { userId: user.id, sessionId: payload.sessionId },
      process.env.JWT_REFRESH_SECRET!,
      { expiresIn: '7d' }
    );
    
    return { accessToken, refreshToken };
  }
}
```

**æƒé™ç®¡ç†æœåŠ¡**:
```typescript
/**
 * æƒé™ç®¡ç†æœåŠ¡
 */
class PermissionService {
  /**
   * æ£€æŸ¥ç”¨æˆ·æƒé™
   */
  async checkPermission(userId: number, permission: string, context?: any): Promise<boolean> {
    // 1. è·å–ç”¨æˆ·è§’è‰²
    const userRoles = await this.getUserRoles(userId);
    
    // 2. è·å–è§’è‰²æƒé™
    const rolePermissions = await this.getRolePermissions(userRoles);
    
    // 3. æ£€æŸ¥ç›´æ¥æƒé™
    if (rolePermissions.includes(permission) || rolePermissions.includes('*')) {
      return true;
    }
    
    // 4. æ£€æŸ¥ä¸Šä¸‹æ–‡æƒé™
    if (context) {
      return await this.checkContextPermission(userId, permission, context);
    }
    
    return false;
  }
  
  /**
   * æƒé™éªŒè¯ä¸­é—´ä»¶
   */
  requirePermission(permission: string) {
    return async (req: Request, res: Response, next: NextFunction) => {
      try {
        const hasPermission = await this.checkPermission(
          req.user.id,
          permission,
          req.context
        );
        
        if (!hasPermission) {
          return res.status(403).json({
            success: false,
            code: 403,
            message: 'æƒé™ä¸è¶³'
          });
        }
        
        next();
      } catch (error) {
        return res.status(500).json({
          success: false,
          code: 500,
          message: 'æƒé™éªŒè¯å¤±è´¥'
        });
      }
    };
  }
}
```

### 3.4 æ•°æ®åº“è®¾è®¡

#### 3.4.1 æ ¸å¿ƒæ•°æ®è¡¨

**ç®¡ç†å‘˜ç”¨æˆ·è¡¨**:
```sql
CREATE TABLE admin_users (
  id INT PRIMARY KEY AUTO_INCREMENT,
  username VARCHAR(50) UNIQUE NOT NULL COMMENT 'ç”¨æˆ·å',
  email VARCHAR(100) UNIQUE NOT NULL COMMENT 'é‚®ç®±',
  password_hash VARCHAR(255) NOT NULL COMMENT 'å¯†ç å“ˆå¸Œ',
  salt VARCHAR(32) NOT NULL COMMENT 'å¯†ç ç›å€¼',
  real_name VARCHAR(50) COMMENT 'çœŸå®å§“å',
  phone VARCHAR(20) COMMENT 'æ‰‹æœºå·',
  avatar_url VARCHAR(255) COMMENT 'å¤´åƒURL',
  status ENUM('active', 'inactive', 'locked') DEFAULT 'active' COMMENT 'çŠ¶æ€',
  two_factor_enabled BOOLEAN DEFAULT FALSE COMMENT 'æ˜¯å¦å¯ç”¨åŒå› ç´ è®¤è¯',
  two_factor_secret VARCHAR(32) COMMENT 'åŒå› ç´ è®¤è¯å¯†é’¥',
  last_login_at TIMESTAMP COMMENT 'æœ€åç™»å½•æ—¶é—´',
  last_login_ip VARCHAR(45) COMMENT 'æœ€åç™»å½•IP',
  login_attempts INT DEFAULT 0 COMMENT 'ç™»å½•å°è¯•æ¬¡æ•°',
  locked_until TIMESTAMP NULL COMMENT 'é”å®šåˆ°æœŸæ—¶é—´',
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  created_by INT COMMENT 'åˆ›å»ºè€…ID',
  
  INDEX idx_username (username),
  INDEX idx_email (email),
  INDEX idx_status (status)
) COMMENT 'ç®¡ç†å‘˜ç”¨æˆ·è¡¨';
```

**è§’è‰²æƒé™è¡¨**:
```sql
CREATE TABLE admin_roles (
  id INT PRIMARY KEY AUTO_INCREMENT,
  code VARCHAR(50) UNIQUE NOT NULL COMMENT 'è§’è‰²ä»£ç ',
  name VARCHAR(100) NOT NULL COMMENT 'è§’è‰²åç§°',
  description TEXT COMMENT 'è§’è‰²æè¿°',
  level INT DEFAULT 0 COMMENT 'è§’è‰²çº§åˆ«',
  status ENUM('active', 'inactive') DEFAULT 'active' COMMENT 'çŠ¶æ€',
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
) COMMENT 'ç®¡ç†å‘˜è§’è‰²è¡¨';

CREATE TABLE admin_permissions (
  id INT PRIMARY KEY AUTO_INCREMENT,
  code VARCHAR(100) UNIQUE NOT NULL COMMENT 'æƒé™ä»£ç ',
  name VARCHAR(100) NOT NULL COMMENT 'æƒé™åç§°',
  description TEXT COMMENT 'æƒé™æè¿°',
  resource VARCHAR(50) NOT NULL COMMENT 'èµ„æºç±»å‹',
  action VARCHAR(50) NOT NULL COMMENT 'æ“ä½œç±»å‹',
  module VARCHAR(50) NOT NULL COMMENT 'æ‰€å±æ¨¡å—',
  status ENUM('active', 'inactive') DEFAULT 'active' COMMENT 'çŠ¶æ€',
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
) COMMENT 'ç®¡ç†å‘˜æƒé™è¡¨';
```

**å®¡è®¡æ—¥å¿—è¡¨**:
```sql
CREATE TABLE admin_audit_logs (
  id BIGINT PRIMARY KEY AUTO_INCREMENT,
  user_id INT COMMENT 'æ“ä½œç”¨æˆ·ID',
  username VARCHAR(50) COMMENT 'æ“ä½œç”¨æˆ·å',
  action VARCHAR(100) NOT NULL COMMENT 'æ“ä½œç±»å‹',
  resource VARCHAR(50) COMMENT 'æ“ä½œèµ„æº',
  resource_id VARCHAR(100) COMMENT 'èµ„æºID',
  method VARCHAR(10) COMMENT 'HTTPæ–¹æ³•',
  url VARCHAR(500) COMMENT 'è¯·æ±‚URL',
  ip_address VARCHAR(45) COMMENT 'IPåœ°å€',
  user_agent TEXT COMMENT 'ç”¨æˆ·ä»£ç†',
  request_data JSON COMMENT 'è¯·æ±‚æ•°æ®',
  response_data JSON COMMENT 'å“åº”æ•°æ®',
  status_code INT COMMENT 'å“åº”çŠ¶æ€ç ',
  duration INT COMMENT 'æ‰§è¡Œæ—¶é—´(æ¯«ç§’)',
  success BOOLEAN COMMENT 'æ˜¯å¦æˆåŠŸ',
  error_message TEXT COMMENT 'é”™è¯¯ä¿¡æ¯',
  session_id VARCHAR(100) COMMENT 'ä¼šè¯ID',
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  
  INDEX idx_user_id (user_id),
  INDEX idx_action (action),
  INDEX idx_created_at (created_at)
) COMMENT 'ç®¡ç†å‘˜æ“ä½œå®¡è®¡æ—¥å¿—';
```

#### 3.4.2 è¡¥å……æ•°æ®è¡¨

**å®æ—¶é€šä¿¡ç›¸å…³è¡¨**:
```sql
CREATE TABLE websocket_connections (
  id BIGINT PRIMARY KEY AUTO_INCREMENT,
  connection_id VARCHAR(100) UNIQUE NOT NULL COMMENT 'è¿æ¥ID',
  user_id INT COMMENT 'ç”¨æˆ·ID',
  ip_address VARCHAR(45) COMMENT 'IPåœ°å€',
  user_agent TEXT COMMENT 'ç”¨æˆ·ä»£ç†',
  connected_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT 'è¿æ¥æ—¶é—´',
  disconnected_at TIMESTAMP NULL COMMENT 'æ–­å¼€æ—¶é—´',
  status ENUM('connected', 'disconnected') DEFAULT 'connected' COMMENT 'è¿æ¥çŠ¶æ€',
  
  INDEX idx_user_id (user_id),
  INDEX idx_status (status),
  INDEX idx_connected_at (connected_at)
) COMMENT 'WebSocketè¿æ¥è®°å½•è¡¨';

CREATE TABLE push_messages (
  id BIGINT PRIMARY KEY AUTO_INCREMENT,
  message_id VARCHAR(100) UNIQUE NOT NULL COMMENT 'æ¶ˆæ¯ID',
  type VARCHAR(50) NOT NULL COMMENT 'æ¶ˆæ¯ç±»å‹',
  title VARCHAR(200) COMMENT 'æ¶ˆæ¯æ ‡é¢˜',
  content TEXT COMMENT 'æ¶ˆæ¯å†…å®¹',
  target_type ENUM('all', 'user', 'group') DEFAULT 'all' COMMENT 'ç›®æ ‡ç±»å‹',
  target_ids JSON COMMENT 'ç›®æ ‡IDåˆ—è¡¨',
  sent_count INT DEFAULT 0 COMMENT 'å‘é€æ•°é‡',
  delivered_count INT DEFAULT 0 COMMENT 'é€è¾¾æ•°é‡',
  read_count INT DEFAULT 0 COMMENT 'å·²è¯»æ•°é‡',
  status ENUM('pending', 'sending', 'sent', 'failed') DEFAULT 'pending' COMMENT 'å‘é€çŠ¶æ€',
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  sent_at TIMESTAMP NULL COMMENT 'å‘é€æ—¶é—´',
  
  INDEX idx_type (type),
  INDEX idx_status (status),
  INDEX idx_created_at (created_at)
) COMMENT 'æ¨é€æ¶ˆæ¯è®°å½•è¡¨';
```

**æ‰‹ç»­è´¹åˆ©æ¶¦ç›¸å…³è¡¨**:
```sql
CREATE TABLE fee_config (
  id INT PRIMARY KEY AUTO_INCREMENT,
  operation_type VARCHAR(50) NOT NULL COMMENT 'æ“ä½œç±»å‹',
  fee_type ENUM('fixed', 'percentage', 'tiered') NOT NULL COMMENT 'è´¹ç”¨ç±»å‹',
  fee_value DECIMAL(10,6) NOT NULL COMMENT 'è´¹ç”¨å€¼',
  min_fee DECIMAL(10,6) DEFAULT 0 COMMENT 'æœ€å°è´¹ç”¨',
  max_fee DECIMAL(10,6) COMMENT 'æœ€å¤§è´¹ç”¨',
  currency VARCHAR(10) DEFAULT 'USDT' COMMENT 'å¸ç§',
  status ENUM('active', 'inactive') DEFAULT 'active' COMMENT 'çŠ¶æ€',
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  
  UNIQUE KEY uk_operation_currency (operation_type, currency),
  INDEX idx_status (status)
) COMMENT 'æ‰‹ç»­è´¹é…ç½®è¡¨';

CREATE TABLE profit_records (
  id BIGINT PRIMARY KEY AUTO_INCREMENT,
  transaction_id VARCHAR(100) COMMENT 'å…³è”äº¤æ˜“ID',
  operation_type VARCHAR(50) NOT NULL COMMENT 'æ“ä½œç±»å‹',
  user_fee DECIMAL(18,8) NOT NULL COMMENT 'ç”¨æˆ·æ”¯ä»˜è´¹ç”¨',
  actual_cost DECIMAL(18,8) NOT NULL COMMENT 'å®é™…æˆæœ¬',
  profit_amount DECIMAL(18,8) NOT NULL COMMENT 'åˆ©æ¶¦é‡‘é¢',
  currency VARCHAR(10) DEFAULT 'USDT' COMMENT 'å¸ç§',
  status ENUM('pending', 'confirmed', 'transferred') DEFAULT 'pending' COMMENT 'çŠ¶æ€',
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  
  INDEX idx_transaction_id (transaction_id),
  INDEX idx_operation_type (operation_type),
  INDEX idx_status (status),
  INDEX idx_created_at (created_at)
) COMMENT 'åˆ©æ¶¦è®°å½•è¡¨';
```

### 3.5 éƒ¨ç½²æ¶æ„

#### 3.5.1 å®¹å™¨åŒ–éƒ¨ç½²

**Dockeré…ç½®**:
```dockerfile
# å‰ç«¯Dockerfile
FROM node:18-alpine AS builder
WORKDIR /app
COPY package*.json ./
RUN npm ci --only=production
COPY . .
RUN npm run build

FROM nginx:alpine
COPY --from=builder /app/dist /usr/share/nginx/html
COPY nginx.conf /etc/nginx/nginx.conf
EXPOSE 80
CMD ["nginx", "-g", "daemon off;"]

# åç«¯Dockerfile
FROM node:18-alpine
RUN addgroup -g 1001 -S nodejs
RUN adduser -S nextjs -u 1001
WORKDIR /app
COPY package*.json ./
RUN npm ci --only=production && npm cache clean --force
COPY --chown=nextjs:nodejs . .
USER nextjs
EXPOSE 3000
HEALTHCHECK --interval=30s --timeout=3s --start-period=5s --retries=3 \
  CMD curl -f http://localhost:3000/api/health || exit 1
CMD ["npm", "start"]
```

**Docker Composeé…ç½®**:
```yaml
version: '3.8'

services:
  frontend:
    build:
      context: ./frontend
      dockerfile: Dockerfile
    ports:
      - "80:80"
      - "443:443"
    volumes:
      - ./ssl:/etc/ssl/certs
    depends_on:
      - backend
    networks:
      - wallet-admin

  backend:
    build:
      context: ./backend
      dockerfile: Dockerfile
    ports:
      - "3000:3000"
    environment:
      - NODE_ENV=production
      - DB_HOST=mysql
      - REDIS_HOST=redis
    depends_on:
      - mysql
      - redis
    networks:
      - wallet-admin

  mysql:
    image: mysql:8.0
    environment:
      MYSQL_ROOT_PASSWORD: ${MYSQL_ROOT_PASSWORD}
      MYSQL_DATABASE: wallet_admin
    volumes:
      - mysql_data:/var/lib/mysql
      - ./init.sql:/docker-entrypoint-initdb.d/init.sql
    networks:
      - wallet-admin

  redis:
    image: redis:7-alpine
    command: redis-server --requirepass ${REDIS_PASSWORD}
    volumes:
      - redis_data:/data
    networks:
      - wallet-admin

  influxdb:
    image: influxdb:2.0
    environment:
      INFLUXDB_DB: monitoring
      INFLUXDB_ADMIN_USER: admin
      INFLUXDB_ADMIN_PASSWORD: ${INFLUXDB_PASSWORD}
    volumes:
      - influxdb_data:/var/lib/influxdb2
    networks:
      - wallet-admin

volumes:
  mysql_data:
  redis_data:
  influxdb_data:

networks:
  wallet-admin:
    driver: bridge
```

#### 3.5.2 Kuberneteséƒ¨ç½²

**Deploymenté…ç½®**:
```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: wallet-admin-backend
  labels:
    app: wallet-admin-backend
spec:
  replicas: 3
  selector:
    matchLabels:
      app: wallet-admin-backend
  template:
    metadata:
      labels:
        app: wallet-admin-backend
    spec:
      containers:
      - name: backend
        image: wallet-admin-backend:latest
        ports:
        - containerPort: 3000
        env:
        - name: NODE_ENV
          value: "production"
        - name: DB_HOST
          valueFrom:
            secretKeyRef:
              name: db-secret
              key: host
        - name: DB_PASSWORD
          valueFrom:
            secretKeyRef:
              name: db-secret
              key: password
        resources:
          requests:
            memory: "256Mi"
            cpu: "250m"
          limits:
            memory: "512Mi"
            cpu: "500m"
        livenessProbe:
          httpGet:
            path: /api/health
            port: 3000
          initialDelaySeconds: 30
          periodSeconds: 10
        readinessProbe:
          httpGet:
            path: /api/ready
            port: 3000
          initialDelaySeconds: 5
          periodSeconds: 5
```

---

## ğŸ” ç¬¬å››éƒ¨åˆ†ï¼šå®‰å…¨è®¾è®¡

### 4.1 å®‰å…¨æ¶æ„æ¦‚è¿°

#### 4.1.1 å¤šå±‚å®‰å…¨é˜²æŠ¤æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ç½‘ç»œå®‰å…¨å±‚                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚   é˜²ç«å¢™    â”‚  â”‚   WAFé˜²æŠ¤   â”‚  â”‚  DDoSé˜²æŠ¤   â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    åº”ç”¨å®‰å…¨å±‚                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  APIç½‘å…³    â”‚  â”‚  é€Ÿç‡é™åˆ¶   â”‚  â”‚  è¯·æ±‚éªŒè¯   â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    è®¤è¯æˆæƒå±‚                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  èº«ä»½è®¤è¯   â”‚  â”‚  æƒé™éªŒè¯   â”‚  â”‚  ä¼šè¯ç®¡ç†   â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    æ•°æ®å®‰å…¨å±‚                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  æ•°æ®åŠ å¯†   â”‚  â”‚  æ•°æ®è„±æ•   â”‚  â”‚  å®¡è®¡æ—¥å¿—   â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 4.1.2 å®‰å…¨è®¾è®¡åŸåˆ™

1. **çºµæ·±é˜²å¾¡**: å¤šå±‚å®‰å…¨é˜²æŠ¤ï¼Œå•ç‚¹å¤±æ•ˆä¸å½±å“æ•´ä½“å®‰å…¨
2. **æœ€å°æƒé™**: ç”¨æˆ·åªè·å¾—å®Œæˆå·¥ä½œæ‰€éœ€çš„æœ€å°æƒé™
3. **é›¶ä¿¡ä»»**: ä¸ä¿¡ä»»ä»»ä½•ç”¨æˆ·æˆ–è®¾å¤‡ï¼Œæ‰€æœ‰è®¿é—®éƒ½éœ€éªŒè¯
4. **æ•°æ®ä¿æŠ¤**: æ•æ„Ÿæ•°æ®åŠ å¯†å­˜å‚¨å’Œä¼ è¾“
5. **å®¡è®¡è¿½è¸ª**: æ‰€æœ‰æ“ä½œéƒ½æœ‰å®Œæ•´çš„å®¡è®¡æ—¥å¿—
6. **å®‰å…¨å¼€å‘**: åœ¨å¼€å‘ç”Ÿå‘½å‘¨æœŸä¸­é›†æˆå®‰å…¨å®è·µ

### 4.2 èº«ä»½è®¤è¯å®‰å…¨

#### 4.2.1 å¤šå› ç´ è®¤è¯

**å¯†ç å®‰å…¨ç­–ç•¥**:
```typescript
/**
 * å¯†ç å®‰å…¨ç®¡ç†
 */
class PasswordSecurity {
  private readonly rules = {
    minLength: 8,
    maxLength: 128,
    requireUppercase: true,
    requireLowercase: true,
    requireNumbers: true,
    requireSpecialChars: true,
    forbiddenPatterns: [
      /(.)\1{2,}/, // è¿ç»­ç›¸åŒå­—ç¬¦
      /123456|654321|qwerty|password/i, // å¸¸è§å¼±å¯†ç 
    ]
  };
  
  /**
   * å¯†ç å¼ºåº¦éªŒè¯
   */
  validatePasswordStrength(password: string): ValidationResult {
    const errors: string[] = [];
    
    if (password.length < this.rules.minLength) {
      errors.push(`å¯†ç é•¿åº¦ä¸èƒ½å°‘äº${this.rules.minLength}ä½`);
    }
    
    if (password.length > this.rules.maxLength) {
      errors.push(`å¯†ç é•¿åº¦ä¸èƒ½è¶…è¿‡${this.rules.maxLength}ä½`);
    }
    
    if (this.rules.requireUppercase && !/[A-Z]/.test(password)) {
      errors.push('å¯†ç å¿…é¡»åŒ…å«å¤§å†™å­—æ¯');
    }
    
    if (this.rules.requireLowercase && !/[a-z]/.test(password)) {
      errors.push('å¯†ç å¿…é¡»åŒ…å«å°å†™å­—æ¯');
    }
    
    if (this.rules.requireNumbers && !/\d/.test(password)) {
      errors.push('å¯†ç å¿…é¡»åŒ…å«æ•°å­—');
    }
    
    if (this.rules.requireSpecialChars && !/[!@#$%^&*(),.?":{}|<>]/.test(password)) {
      errors.push('å¯†ç å¿…é¡»åŒ…å«ç‰¹æ®Šå­—ç¬¦');
    }
    
    for (const pattern of this.rules.forbiddenPatterns) {
      if (pattern.test(password)) {
        errors.push('å¯†ç åŒ…å«ä¸å®‰å…¨çš„æ¨¡å¼');
        break;
      }
    }
    
    return {
      isValid: errors.length === 0,
      errors,
      strength: this.calculatePasswordStrength(password)
    };
  }
  
  /**
   * å¯†ç å“ˆå¸Œ
   */
  async hashPassword(password: string): Promise<{ hash: string; salt: string }> {
    const salt = crypto.randomBytes(16).toString('hex');
    const hash = await bcrypt.hash(password + salt, 12);
    return { hash, salt };
  }
}
```

**åŒå› ç´ è®¤è¯**:
```typescript
/**
 * åŒå› ç´ è®¤è¯ç®¡ç†
 */
class TwoFactorAuth {
  /**
   * ç”Ÿæˆ2FAå¯†é’¥
   */
  generateSecret(username: string) {
    const secret = speakeasy.generateSecret({
      name: `æ•°å­—é’±åŒ…ç®¡ç†åå° (${username})`,
      issuer: 'æ•°å­—é’±åŒ…ç®¡ç†åå°',
      length: 32
    });
    
    return {
      secret: secret.base32,
      qrCode: secret.otpauth_url,
      backupCodes: this.generateBackupCodes()
    };
  }
  
  /**
   * éªŒè¯TOTPä»£ç 
   */
  verifyTOTP(secret: string, token: string): boolean {
    return speakeasy.totp.verify({
      secret,
      encoding: 'base32',
      token,
      window: 2 // å…è®¸å‰å2ä¸ªæ—¶é—´çª—å£
    });
  }
  
  /**
   * ç”Ÿæˆå¤‡ç”¨ä»£ç 
   */
  private generateBackupCodes(): string[] {
    const codes: string[] = [];
    for (let i = 0; i < 10; i++) {
      codes.push(crypto.randomBytes(4).toString('hex').toUpperCase());
    }
    return codes;
  }
}
```

#### 4.2.2 ä¼šè¯ç®¡ç†å®‰å…¨

**ä»¤ç‰Œç®¡ç†**:
```typescript
/**
 * ä»¤ç‰Œç®¡ç†å™¨
 */
class TokenManager {
  private readonly ACCESS_TOKEN_EXPIRY = '15m';
  private readonly REFRESH_TOKEN_EXPIRY = '7d';
  private readonly BLACKLIST_PREFIX = 'blacklist:';
  
  /**
   * ç”Ÿæˆè®¿é—®ä»¤ç‰Œ
   */
  generateAccessToken(payload: TokenPayload): string {
    return jwt.sign(payload, process.env.JWT_SECRET!, {
      expiresIn: this.ACCESS_TOKEN_EXPIRY,
      issuer: 'wallet-admin',
      audience: 'admin-users'
    });
  }
  
  /**
   * ç”Ÿæˆåˆ·æ–°ä»¤ç‰Œ
   */
  generateRefreshToken(payload: RefreshTokenPayload): string {
    return jwt.sign(payload, process.env.JWT_REFRESH_SECRET!, {
      expiresIn: this.REFRESH_TOKEN_EXPIRY,
      issuer: 'wallet-admin',
      audience: 'admin-users'
    });
  }
  
  /**
   * éªŒè¯ä»¤ç‰Œ
   */
  async verifyToken(token: string, type: 'access' | 'refresh'): Promise<any> {
    try {
      // æ£€æŸ¥é»‘åå•
      const isBlacklisted = await redis.exists(`${this.BLACKLIST_PREFIX}${token}`);
      if (isBlacklisted) {
        throw new Error('ä»¤ç‰Œå·²è¢«æ’¤é”€');
      }
      
      const secret = type === 'access' 
        ? process.env.JWT_SECRET! 
        : process.env.JWT_REFRESH_SECRET!;
        
      return jwt.verify(token, secret);
    } catch (error) {
      throw new Error('ä»¤ç‰ŒéªŒè¯å¤±è´¥');
    }
  }
  
  /**
   * æ’¤é”€ä»¤ç‰Œ
   */
  async revokeToken(token: string): Promise<void> {
    const decoded = jwt.decode(token) as any;
    if (decoded && decoded.exp) {
      const ttl = decoded.exp - Math.floor(Date.now() / 1000);
      if (ttl > 0) {
        await redis.setex(`${this.BLACKLIST_PREFIX}${token}`, ttl, '1');
      }
    }
  }
}
```

### 4.3 è®¿é—®æ§åˆ¶å®‰å…¨

#### 4.3.1 IPè®¿é—®æ§åˆ¶

**IPç™½åå•ç®¡ç†**:
```typescript
/**
 * IPè®¿é—®æ§åˆ¶
 */
class IPAccessControl {
  private whitelist: Set<string> = new Set();
  private cidrRanges: Array<{ network: string; mask: number }> = [];
  
  /**
   * æ·»åŠ IPåˆ°ç™½åå•
   */
  addToWhitelist(ip: string): void {
    if (this.isCIDR(ip)) {
      const [network, mask] = ip.split('/');
      this.cidrRanges.push({ network, mask: parseInt(mask) });
    } else {
      this.whitelist.add(ip);
    }
  }
  
  /**
   * æ£€æŸ¥IPæ˜¯å¦è¢«å…è®¸
   */
  isAllowed(ip: string): boolean {
    // æ£€æŸ¥ç›´æ¥IPåŒ¹é…
    if (this.whitelist.has(ip)) {
      return true;
    }
    
    // æ£€æŸ¥CIDRèŒƒå›´åŒ¹é…
    return this.cidrRanges.some(range => 
      this.isIPInCIDR(ip, range.network, range.mask)
    );
  }
  
  /**
   * æ£€æŸ¥IPæ˜¯å¦åœ¨CIDRèŒƒå›´å†…
   */
  private isIPInCIDR(ip: string, network: string, mask: number): boolean {
    const ipNum = this.ipToNumber(ip);
    const networkNum = this.ipToNumber(network);
    const maskNum = (0xFFFFFFFF << (32 - mask)) >>> 0;
    
    return (ipNum & maskNum) === (networkNum & maskNum);
  }
  
  /**
   * IPåœ°å€è½¬æ•°å­—
   */
  private ipToNumber(ip: string): number {
    return ip.split('.').reduce((acc, octet) => (acc << 8) + parseInt(octet), 0) >>> 0;
  }
  
  /**
   * æ£€æŸ¥æ˜¯å¦ä¸ºCIDRæ ¼å¼
   */
  private isCIDR(ip: string): boolean {
    return ip.includes('/');
  }
}
```

#### 4.3.2 é€Ÿç‡é™åˆ¶

**APIé€Ÿç‡é™åˆ¶**:
```typescript
/**
 * é€Ÿç‡é™åˆ¶å™¨
 */
class RateLimiter {
  /**
   * åˆ›å»ºé€Ÿç‡é™åˆ¶ä¸­é—´ä»¶
   */
  static createLimiter(options: RateLimitOptions) {
    return rateLimit({
      windowMs: options.windowMs,
      max: options.max,
      message: {
        success: false,
        code: 429,
        message: 'è¯·æ±‚è¿‡äºé¢‘ç¹ï¼Œè¯·ç¨åå†è¯•'
      },
      standardHeaders: true,
      legacyHeaders: false,
      keyGenerator: options.keyGenerator || ((req) => req.ip),
      skip: options.skip,
      onLimitReached: (req, res, options) => {
        logger.warn('Rate limit exceeded', {
          ip: req.ip,
          userAgent: req.get('User-Agent'),
          path: req.path
        });
      }
    });
  }
  
  /**
   * æ•æ„Ÿæ“ä½œé™åˆ¶å™¨
   */
  static sensitiveOperationLimiter = this.createLimiter({
    windowMs: 15 * 60 * 1000, // 15åˆ†é’Ÿ
    max: 5, // æœ€å¤š5æ¬¡å°è¯•
    keyGenerator: (req) => `${req.ip}:${req.user?.id || 'anonymous'}`
  });
  
  /**
   * ç™»å½•é™åˆ¶å™¨
   */
  static loginLimiter = this.createLimiter({
    windowMs: 15 * 60 * 1000, // 15åˆ†é’Ÿ
    max: 10, // æœ€å¤š10æ¬¡ç™»å½•å°è¯•
    keyGenerator: (req) => req.ip
  });
}
```

### 4.4 æ•°æ®å®‰å…¨ä¿æŠ¤

#### 4.4.1 æ•°æ®è„±æ•

**æ•æ„Ÿæ•°æ®è„±æ•**:
```typescript
/**
 * æ•°æ®è„±æ•å¤„ç†
 */
class DataMasking {
  /**
   * æ‰‹æœºå·è„±æ•
   */
  static maskPhone(phone: string): string {
    if (!phone || phone.length < 7) return phone;
    return phone.replace(/(\d{3})\d{4}(\d{4})/, '$1****$2');
  }
  
  /**
   * é‚®ç®±è„±æ•
   */
  static maskEmail(email: string): string {
    if (!email || !email.includes('@')) return email;
    const [username, domain] = email.split('@');
    const maskedUsername = username.length > 2 
      ? username.substring(0, 2) + '*'.repeat(username.length - 2)
      : username;
    return `${maskedUsername}@${domain}`;
  }
  
  /**
   * é’±åŒ…åœ°å€è„±æ•
   */
  static maskWalletAddress(address: string): string {
    if (!address || address.length < 10) return address;
    return `${address.substring(0, 6)}...${address.substring(address.length - 4)}`;
  }
  
  /**
   * æ ¹æ®æƒé™è„±æ•æ•°æ®
   */
  static maskDataByPermission(data: any, userPermissions: string[]): any {
    const hasFullAccess = userPermissions.includes('data:full_access');
    
    if (hasFullAccess) {
      return data;
    }
    
    const maskedData = { ...data };
    
    if (maskedData.phone && !userPermissions.includes('user:view_phone')) {
      maskedData.phone = this.maskPhone(maskedData.phone);
    }
    
    if (maskedData.email && !userPermissions.includes('user:view_email')) {
      maskedData.email = this.maskEmail(maskedData.email);
    }
    
    if (maskedData.walletAddress && !userPermissions.includes('wallet:view_full_address')) {
      maskedData.walletAddress = this.maskWalletAddress(maskedData.walletAddress);
    }
    
    return maskedData;
  }
}
```

#### 4.4.2 æ•°æ®åŠ å¯†

**æ•æ„Ÿæ•°æ®åŠ å¯†**:
```typescript
/**
 * æ•°æ®åŠ å¯†å¤„ç†
 */
class DataEncryption {
  private readonly algorithm = 'aes-256-gcm';
  private readonly keyLength = 32;
  private readonly ivLength = 16;
  private readonly tagLength = 16;
  
  /**
   * åŠ å¯†æ•æ„Ÿæ•°æ®
   */
  encrypt(plaintext: string, key: string): EncryptedData {
    const keyBuffer = this.deriveKey(key);
    const iv = crypto.randomBytes(this.ivLength);
    
    const cipher = crypto.createCipher(this.algorithm, keyBuffer, { iv });
    
    let encrypted = cipher.update(plaintext, 'utf8', 'hex');
    encrypted += cipher.final('hex');
    
    const authTag = cipher.getAuthTag();
    
    return {
      encrypted,
      iv: iv.toString('hex'),
      authTag: authTag.toString('hex')
    };
  }
  
  /**
   * è§£å¯†æ•æ„Ÿæ•°æ®
   */
  decrypt(encryptedData: EncryptedData, key: string): string {
    const keyBuffer = this.deriveKey(key);
    const iv = Buffer.from(encryptedData.iv, 'hex');
    const authTag = Buffer.from(encryptedData.authTag, 'hex');
    
    const decipher = crypto.createDecipher(this.algorithm, keyBuffer, { iv });
    decipher.setAuthTag(authTag);
    
    let decrypted = decipher.update(encryptedData.encrypted, 'hex', 'utf8');
    decrypted += decipher.final('utf8');
    
    return decrypted;
  }
  
  /**
   * æ´¾ç”ŸåŠ å¯†å¯†é’¥
   */
  private deriveKey(password: string): Buffer {
    return crypto.pbkdf2Sync(password, 'salt', 100000, this.keyLength, 'sha256');
  }
}
```

### 4.5 å®¡è®¡æ—¥å¿—ç³»ç»Ÿ

#### 4.5.1 æ“ä½œå®¡è®¡

**å®¡è®¡æ—¥å¿—è®°å½•**:
```typescript
/**
 * å®¡è®¡æ—¥å¿—è®°å½•å™¨
 */
class AuditLogger {
  /**
   * å®¡è®¡ä¸­é—´ä»¶
   */
  static auditMiddleware() {
    return async (req: Request, res: Response, next: NextFunction) => {
      const startTime = Date.now();
      const originalSend = res.send;
      let responseData: any;
      
      // æ‹¦æˆªå“åº”æ•°æ®
      res.send = function(data: any) {
        responseData = data;
        return originalSend.call(this, data);
      };
      
      // è¯·æ±‚å®Œæˆåè®°å½•æ—¥å¿—
      res.on('finish', async () => {
        try {
          const duration = Date.now() - startTime;
          const logData = {
            userId: req.user?.id,
            username: req.user?.username,
            action: AuditLogger.determineAction(req),
            resource: AuditLogger.determineResource(req.path),
            resourceId: req.params.id,
            method: req.method,
            url: req.originalUrl,
            ipAddress: req.ip,
            userAgent: req.get('User-Agent'),
            requestData: AuditLogger.sanitizeRequestData(req.body),
            responseData: AuditLogger.sanitizeResponseData(responseData),
            statusCode: res.statusCode,
            duration,
            success: res.statusCode < 400,
            errorMessage: res.statusCode >= 400 ? responseData?.message : null,
            sessionId: req.sessionId,
            timestamp: new Date()
          };
          
          await AuditLogger.saveAuditLog(logData);
          
          // æ£€æŸ¥å®‰å…¨å‘Šè­¦
          await AuditLogger.checkSecurityAlerts(logData);
        } catch (error) {
          logger.error('Failed to save audit log', error);
        }
      });
      
      next();
    };
  }
  
  /**
   * ç¡®å®šæ“ä½œç±»å‹
   */
  private static determineAction(req: Request): string {
    const method = req.method.toLowerCase();
    const path = req.path;
    
    if (path.includes('/login')) return 'login';
    if (path.includes('/logout')) return 'logout';
    if (method === 'get') return 'read';
    if (method === 'post') return 'create';
    if (method === 'put' || method === 'patch') return 'update';
    if (method === 'delete') return 'delete';
    
    return 'unknown';
  }
  
  /**
   * ä¿å­˜å®¡è®¡æ—¥å¿—
   */
  private static async saveAuditLog(logData: AuditLogData): Promise<void> {
    await db.query(`
      INSERT INTO admin_audit_logs (
        user_id, username, action, resource, resource_id,
        method, url, ip_address, user_agent, request_data,
        response_data, status_code, duration, success,
        error_message, session_id, created_at
      ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
    `, [
      logData.userId, logData.username, logData.action,
      logData.resource, logData.resourceId, logData.method,
      logData.url, logData.ipAddress, logData.userAgent,
      JSON.stringify(logData.requestData),
      JSON.stringify(logData.responseData),
      logData.statusCode, logData.duration, logData.success,
      logData.errorMessage, logData.sessionId, logData.timestamp
    ]);
  }
}
```

### 4.6 å®‰å…¨ç›‘æ§å‘Šè­¦

#### 4.6.1 å®‰å…¨äº‹ä»¶æ£€æµ‹

**å®‰å…¨å‘Šè­¦ç³»ç»Ÿ**:
```typescript
/**
 * å®‰å…¨å‘Šè­¦ç³»ç»Ÿ
 */
class SecurityAlertSystem {
  /**
   * æ£€æŸ¥å¤±è´¥ç™»å½•å°è¯•
   */
  static async checkFailedLoginAttempts(ipAddress: string, userId?: number): Promise<void> {
    const key = `failed_login:${ipAddress}`;
    const attempts = await redis.incr(key);
    
    if (attempts === 1) {
      await redis.expire(key, 3600); // 1å°æ—¶è¿‡æœŸ
    }
    
    if (attempts >= 5) {
      // è§¦å‘IPå°ç¦
      await redis.setex(`blocked_ip:${ipAddress}`, 3600, '1');
      
      // å‘é€å®‰å…¨å‘Šè­¦
      await this.sendSecurityAlert({
        type: 'FAILED_LOGIN_ATTEMPTS',
        severity: 'HIGH',
        message: `IP ${ipAddress} è¿ç»­ç™»å½•å¤±è´¥ ${attempts} æ¬¡`,
        data: { ipAddress, attempts, userId }
      });
    }
  }
  
  /**
   * æ•æ„Ÿæ“ä½œå‘Šè­¦
   */
  static async alertSensitiveOperation(operation: string, userId: number, data: any): Promise<void> {
    await this.sendSecurityAlert({
      type: 'SENSITIVE_OPERATION',
      severity: 'MEDIUM',
      message: `ç”¨æˆ· ${userId} æ‰§è¡Œæ•æ„Ÿæ“ä½œ: ${operation}`,
      data: { operation, userId, ...data }
    });
  }
  
  /**
   * å¼‚å¸¸IPè®¿é—®æ£€æµ‹
   */
  static async checkAnomalousIPAccess(userId: number, ipAddress: string): Promise<void> {
    const historicalIPs = await this.getUserHistoricalIPs(userId);
    
    if (!historicalIPs.includes(ipAddress)) {
      await this.sendSecurityAlert({
        type: 'ANOMALOUS_IP_ACCESS',
        severity: 'MEDIUM',
        message: `ç”¨æˆ· ${userId} ä»æ–°IPåœ°å€ ${ipAddress} è®¿é—®ç³»ç»Ÿ`,
        data: { userId, ipAddress, historicalIPs }
      });
    }
  }
  
  /**
   * å‘é€å®‰å…¨å‘Šè­¦
   */
  private static async sendSecurityAlert(alert: SecurityAlert): Promise<void> {
    // ä¿å­˜åˆ°æ•°æ®åº“
    await this.saveSecurityAlert(alert);
    
    // å‘é€åˆ°Redisé˜Ÿåˆ—
    await redis.lpush('security_alerts', JSON.stringify(alert));
    
    // WebSocketå®æ—¶é€šçŸ¥
    socketIO.emit('security_alert', alert);
    
    // å‘é€é€šçŸ¥ç»™ç®¡ç†å‘˜
    await this.notifyAdministrators(alert);
  }
}
```

---

## ğŸ“Š ç¬¬äº”éƒ¨åˆ†ï¼šæ•°æ®ç®¡ç†

### 5.1 æ•°æ®è¦†ç›–åˆ†æ

#### 5.1.1 å·²è¦†ç›–æ•°æ®ç®¡ç†

**æ ¸å¿ƒä¸šåŠ¡æ•°æ®**:
1. **ç”¨æˆ·æ•°æ®ç®¡ç†** âœ…
   - ç”¨æˆ·åŸºæœ¬ä¿¡æ¯ã€çŠ¶æ€ç®¡ç†
   - ç”¨æˆ·è¡Œä¸ºæ—¥å¿—ã€é£é™©è¯„ä¼°
   - ç”¨æˆ·å…³ç³»é“¾ã€å›¢é˜Ÿç»“æ„

2. **é’±åŒ…æ•°æ®ç®¡ç†** âœ…
   - é’±åŒ…åœ°å€ã€ä½™é¢ä¿¡æ¯
   - èµ„é‡‘æµæ°´ã€äº¤æ˜“è®°å½•
   - èµ„é‡‘å½’é›†ã€å¼‚å¸¸ç›‘æ§

3. **äº¤æ˜“æ•°æ®ç®¡ç†** âœ…
   - å……å€¼æç°è®°å½•
   - äº¤æ˜“çŠ¶æ€è·Ÿè¸ª
   - å¼‚å¸¸äº¤æ˜“å¤„ç†

4. **ä»»åŠ¡æ•°æ®ç®¡ç†** âœ…
   - ä»»åŠ¡é…ç½®ã€å®Œæˆç»Ÿè®¡
   - å¥–åŠ±å‘æ”¾ã€æ•ˆæœåˆ†æ
   - ç”¨æˆ·å‚ä¸åº¦ç»Ÿè®¡

5. **çº¢åŒ…æ•°æ®ç®¡ç†** âœ…
   - çº¢åŒ…æ´»åŠ¨é…ç½®
   - å‘æ”¾é¢†å–è®°å½•
   - æ´»åŠ¨æ•ˆæœåˆ†æ

#### 5.1.2 è¡¥å……æ•°æ®ç®¡ç†éœ€æ±‚

**å®æ—¶é€šä¿¡æ•°æ®**:
```sql
-- WebSocketè¿æ¥ç›‘æ§è¡¨
CREATE TABLE websocket_connections (
  id BIGINT PRIMARY KEY AUTO_INCREMENT,
  connection_id VARCHAR(100) UNIQUE NOT NULL,
  user_id INT,
  ip_address VARCHAR(45),
  connected_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  disconnected_at TIMESTAMP NULL,
  status ENUM('connected', 'disconnected') DEFAULT 'connected',
  
  INDEX idx_user_id (user_id),
  INDEX idx_status (status)
);

-- æ¨é€æ¶ˆæ¯è®°å½•è¡¨
CREATE TABLE push_message_logs (
  id BIGINT PRIMARY KEY AUTO_INCREMENT,
  message_id VARCHAR(100) NOT NULL,
  user_id INT,
  message_type VARCHAR(50),
  content JSON,
  sent_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  delivered_at TIMESTAMP NULL,
  read_at TIMESTAMP NULL,
  status ENUM('sent', 'delivered', 'read', 'failed') DEFAULT 'sent',
  
  INDEX idx_user_id (user_id),
  INDEX idx_message_type (message_type),
  INDEX idx_status (status)
);
```

**æ‰‹ç»­è´¹åˆ©æ¶¦æ•°æ®**:
```sql
-- æ‰‹ç»­è´¹é…ç½®è¡¨
CREATE TABLE fee_configurations (
  id INT PRIMARY KEY AUTO_INCREMENT,
  operation_type VARCHAR(50) NOT NULL,
  fee_structure JSON NOT NULL,
  effective_from TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  effective_until TIMESTAMP NULL,
  status ENUM('active', 'inactive') DEFAULT 'active',
  
  INDEX idx_operation_type (operation_type),
  INDEX idx_status (status)
);

-- åˆ©æ¶¦åˆ†æè¡¨
CREATE TABLE profit_analytics (
  id BIGINT PRIMARY KEY AUTO_INCREMENT,
  date DATE NOT NULL,
  operation_type VARCHAR(50),
  total_fee_collected DECIMAL(18,8) DEFAULT 0,
  total_cost_incurred DECIMAL(18,8) DEFAULT 0,
  net_profit DECIMAL(18,8) DEFAULT 0,
  transaction_count INT DEFAULT 0,
  
  UNIQUE KEY uk_date_operation (date, operation_type),
  INDEX idx_date (date)
);
```

### 5.2 æ•°æ®è´¨é‡ç®¡ç†

#### 5.2.1 æ•°æ®ä¸€è‡´æ€§æ£€æŸ¥

**æ•°æ®ä¸€è‡´æ€§éªŒè¯**:
```typescript
/**
 * æ•°æ®è´¨é‡ç®¡ç†å™¨
 */
class DataQualityManager {
  /**
   * æ£€æŸ¥ç”¨æˆ·é’±åŒ…æ•°æ®ä¸€è‡´æ€§
   */
  async checkUserWalletConsistency(): Promise<DataQualityReport> {
    const issues: DataIssue[] = [];
    
    // æ£€æŸ¥ç”¨æˆ·æ˜¯å¦éƒ½æœ‰å¯¹åº”çš„é’±åŒ…è®°å½•
    const usersWithoutWallets = await db.query(`
      SELECT u.id, u.username 
      FROM users u 
      LEFT JOIN user_wallets uw ON u.id = uw.user_id 
      WHERE uw.user_id IS NULL
    `);
    
    if (usersWithoutWallets.length > 0) {
      issues.push({
        type: 'MISSING_WALLET',
        severity: 'HIGH',
        count: usersWithoutWallets.length,
        description: 'ç”¨æˆ·ç¼ºå°‘é’±åŒ…è®°å½•',
        affectedRecords: usersWithoutWallets
      });
    }
    
    // æ£€æŸ¥é’±åŒ…ä½™é¢ä¸äº¤æ˜“è®°å½•æ˜¯å¦ä¸€è‡´
    const balanceInconsistencies = await this.checkBalanceConsistency();
    if (balanceInconsistencies.length > 0) {
      issues.push({
        type: 'BALANCE_INCONSISTENCY',
        severity: 'HIGH',
        count: balanceInconsistencies.length,
        description: 'é’±åŒ…ä½™é¢ä¸äº¤æ˜“è®°å½•ä¸ä¸€è‡´',
        affectedRecords: balanceInconsistencies
      });
    }
    
    return {
      checkType: 'USER_WALLET_CONSISTENCY',
      timestamp: new Date(),
      totalIssues: issues.length,
      issues
    };
  }
  
  /**
   * æ£€æŸ¥äº¤æ˜“æ•°æ®å®Œæ•´æ€§
   */
  async checkTransactionIntegrity(): Promise<DataQualityReport> {
    const issues: DataIssue[] = [];
    
    // æ£€æŸ¥äº¤æ˜“çŠ¶æ€å¼‚å¸¸
    const stuckTransactions = await db.query(`
      SELECT * FROM transactions 
      WHERE status = 'pending' 
      AND created_at < DATE_SUB(NOW(), INTERVAL 1 HOUR)
    `);
    
    if (stuckTransactions.length > 0) {
      issues.push({
        type: 'STUCK_TRANSACTIONS',
        severity: 'MEDIUM',
        count: stuckTransactions.length,
        description: 'é•¿æ—¶é—´å¤„äºå¾…å¤„ç†çŠ¶æ€çš„äº¤æ˜“',
        affectedRecords: stuckTransactions
      });
    }
    
    // æ£€æŸ¥é‡å¤äº¤æ˜“
    const duplicateTransactions = await db.query(`
      SELECT transaction_hash, COUNT(*) as count
      FROM transactions 
      WHERE transaction_hash IS NOT NULL
      GROUP BY transaction_hash 
      HAVING count > 1
    `);
    
    if (duplicateTransactions.length > 0) {
      issues.push({
        type: 'DUPLICATE_TRANSACTIONS',
        severity: 'HIGH',
        count: duplicateTransactions.length,
        description: 'é‡å¤çš„äº¤æ˜“å“ˆå¸Œ',
        affectedRecords: duplicateTransactions
      });
    }
    
    return {
      checkType: 'TRANSACTION_INTEGRITY',
      timestamp: new Date(),
      totalIssues: issues.length,
      issues
    };
  }
  
  /**
   * è‡ªåŠ¨ä¿®å¤æ•°æ®é—®é¢˜
   */
  async repairDataIssues(issueType: string, affectedRecords: any[]): Promise<RepairResult> {
    const repairResults: RepairResult = {
      issueType,
      totalRecords: affectedRecords.length,
      repairedCount: 0,
      failedCount: 0,
      errors: []
    };
    
    for (const record of affectedRecords) {
      try {
        switch (issueType) {
          case 'MISSING_WALLET':
            await this.createMissingWallet(record.id);
            break;
          case 'BALANCE_INCONSISTENCY':
            await this.recalculateBalance(record.user_id);
            break;
          case 'STUCK_TRANSACTIONS':
            await this.resolveStuckTransaction(record.id);
            break;
          default:
            throw new Error(`æœªçŸ¥çš„é—®é¢˜ç±»å‹: ${issueType}`);
        }
        repairResults.repairedCount++;
      } catch (error) {
        repairResults.failedCount++;
        repairResults.errors.push({
          recordId: record.id,
          error: error.message
        });
      }
    }
    
    return repairResults;
  }
}
```

### 5.3 æ•°æ®å¤‡ä»½ä¸æ¢å¤

#### 5.3.1 æ•°æ®å¤‡ä»½ç­–ç•¥

**è‡ªåŠ¨å¤‡ä»½ç®¡ç†**:
```typescript
/**
 * æ•°æ®å¤‡ä»½ç®¡ç†å™¨
 */
class DataBackupManager {
  /**
   * æ‰§è¡Œæ•°æ®åº“å¤‡ä»½
   */
  async performDatabaseBackup(): Promise<BackupResult> {
    const timestamp = new Date().toISOString().replace(/[:.]/g, '-');
    const backupFileName = `wallet_admin_backup_${timestamp}.sql`;
    const backupPath = path.join(process.env.BACKUP_DIR!, backupFileName);
    
    try {
      // æ‰§è¡Œmysqldump
      const command = `mysqldump -h ${process.env.DB_HOST} -u ${process.env.DB_USER} -p${process.env.DB_PASSWORD} ${process.env.DB_NAME} > ${backupPath}`;
      
      await this.executeCommand(command);
      
      // å‹ç¼©å¤‡ä»½æ–‡ä»¶
      const compressedPath = `${backupPath}.gz`;
      await this.compressFile(backupPath, compressedPath);
      
      // åˆ é™¤åŸå§‹æ–‡ä»¶
      await fs.unlink(backupPath);
      
      // è®°å½•å¤‡ä»½ä¿¡æ¯
      const backupInfo = {
        fileName: `${backupFileName}.gz`,
        filePath: compressedPath,
        fileSize: await this.getFileSize(compressedPath),
        createdAt: new Date(),
        type: 'FULL_BACKUP'
      };
      
      await this.saveBackupRecord(backupInfo);
      
      // æ¸…ç†æ—§å¤‡ä»½
      await this.cleanupOldBackups();
      
      return {
        success: true,
        backupInfo
      };
    } catch (error) {
      return {
        success: false,
        error: error.message
      };
    }
  }
  
  /**
   * å¢é‡å¤‡ä»½
   */
  async performIncrementalBackup(): Promise<BackupResult> {
    const lastBackupTime = await this.getLastBackupTime();
    const timestamp = new Date().toISOString().replace(/[:.]/g, '-');
    const backupFileName = `wallet_admin_incremental_${timestamp}.sql`;
    
    try {
      // å¤‡ä»½å®¡è®¡æ—¥å¿—ï¼ˆå¢é‡æ•°æ®ï¼‰
      const auditLogs = await db.query(`
        SELECT * FROM admin_audit_logs 
        WHERE created_at > ?
      `, [lastBackupTime]);
      
      // å¤‡ä»½äº¤æ˜“è®°å½•ï¼ˆå¢é‡æ•°æ®ï¼‰
      const transactions = await db.query(`
        SELECT * FROM transactions 
        WHERE created_at > ?
      `, [lastBackupTime]);
      
      const incrementalData = {
        auditLogs,
        transactions,
        backupTime: new Date()
      };
      
      const backupPath = path.join(process.env.BACKUP_DIR!, backupFileName);
      await fs.writeFile(backupPath, JSON.stringify(incrementalData, null, 2));
      
      // å‹ç¼©å¤‡ä»½æ–‡ä»¶
      const compressedPath = `${backupPath}.gz`;
      await this.compressFile(backupPath, compressedPath);
      
      return {
        success: true,
        backupInfo: {
          fileName: `${backupFileName}.gz`,
          filePath: compressedPath,
          type: 'INCREMENTAL_BACKUP'
        }
      };
    } catch (error) {
      return {
        success: false,
        error: error.message
      };
    }
  }
}
```

---

## ğŸš€ ç¬¬å…­éƒ¨åˆ†ï¼šå®æ–½è®¡åˆ’

### 6.1 å¼€å‘è®¡åˆ’

#### 6.1.1 å¼€å‘é˜¶æ®µåˆ’åˆ†

**ç¬¬ä¸€é˜¶æ®µï¼šåŸºç¡€æ¶æ„æ­å»ºï¼ˆ2å‘¨ï¼‰**
- é¡¹ç›®åˆå§‹åŒ–å’Œç¯å¢ƒé…ç½®
- æ•°æ®åº“è®¾è®¡å’Œåˆå§‹åŒ–
- åŸºç¡€è®¤è¯å’Œæƒé™ç³»ç»Ÿ
- æ ¸å¿ƒä¸­é—´ä»¶å’Œå·¥å…·ç±»

**ç¬¬äºŒé˜¶æ®µï¼šæ ¸å¿ƒåŠŸèƒ½å¼€å‘ï¼ˆ4å‘¨ï¼‰**
- ç”¨æˆ·ç®¡ç†æ¨¡å—
- é’±åŒ…ç®¡ç†æ¨¡å—
- äº¤æ˜“ç®¡ç†æ¨¡å—
- åŸºç¡€ç›‘æ§åŠŸèƒ½

**ç¬¬ä¸‰é˜¶æ®µï¼šä¸šåŠ¡åŠŸèƒ½å¼€å‘ï¼ˆ3å‘¨ï¼‰**
- ä»»åŠ¡ç®¡ç†æ¨¡å—
- çº¢åŒ…ç®¡ç†æ¨¡å—
- å›¢é˜Ÿç®¡ç†æ¨¡å—
- æ’è¡Œæ¦œç®¡ç†æ¨¡å—

**ç¬¬å››é˜¶æ®µï¼šè¡¥å……åŠŸèƒ½å¼€å‘ï¼ˆ3å‘¨ï¼‰**
- å®æ—¶é€šä¿¡ç®¡ç†
- æ‰‹ç»­è´¹åˆ©æ¶¦ç®¡ç†
- APIç›‘æ§ç®¡ç†
- åŒºå—é“¾é›†æˆç®¡ç†

**ç¬¬äº”é˜¶æ®µï¼šç³»ç»Ÿå®Œå–„ï¼ˆ2å‘¨ï¼‰**
- é«˜çº§ç³»ç»Ÿé…ç½®
- æ•°æ®è´¨é‡ç®¡ç†
- å®‰å…¨åŠ å›ºå’Œæµ‹è¯•
- æ€§èƒ½ä¼˜åŒ–

#### 6.1.2 æŠ€æœ¯å®æ–½å»ºè®®

**å‰ç«¯å¼€å‘å»ºè®®**:
1. ä½¿ç”¨React + TypeScript + Ant Designå¿«é€Ÿæ­å»º
2. é‡‡ç”¨æ¨¡å—åŒ–å¼€å‘ï¼Œæ¯ä¸ªåŠŸèƒ½æ¨¡å—ç‹¬ç«‹å¼€å‘
3. ç»Ÿä¸€çŠ¶æ€ç®¡ç†ï¼Œä½¿ç”¨Redux Toolkit
4. ç»„ä»¶å¤ç”¨ï¼Œå»ºç«‹é€šç”¨ç»„ä»¶åº“

**åç«¯å¼€å‘å»ºè®®**:
1. é‡‡ç”¨åˆ†å±‚æ¶æ„ï¼ŒController-Service-Model
2. ç»Ÿä¸€é”™è¯¯å¤„ç†å’Œå“åº”æ ¼å¼
3. å®Œå–„çš„å‚æ•°éªŒè¯å’Œå®‰å…¨æ£€æŸ¥
4. å……åˆ†çš„å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•

### 6.2 éƒ¨ç½²æ–¹æ¡ˆ

#### 6.2.1 ç¯å¢ƒé…ç½®

**å¼€å‘ç¯å¢ƒ**:
- æœ¬åœ°å¼€å‘ç¯å¢ƒé…ç½®
- Dockerå®¹å™¨åŒ–å¼€å‘
- çƒ­é‡è½½å’Œè°ƒè¯•é…ç½®

**æµ‹è¯•ç¯å¢ƒ**:
- è‡ªåŠ¨åŒ–æµ‹è¯•ç¯å¢ƒ
- æŒç»­é›†æˆé…ç½®
- æµ‹è¯•æ•°æ®ç®¡ç†

**ç”Ÿäº§ç¯å¢ƒ**:
- é«˜å¯ç”¨éƒ¨ç½²æ¶æ„
- è´Ÿè½½å‡è¡¡é…ç½®
- ç›‘æ§å’Œå‘Šè­¦ç³»ç»Ÿ

#### 6.2.2 å®‰å…¨éƒ¨ç½²

**ç½‘ç»œå®‰å…¨**:
- HTTPSè¯ä¹¦é…ç½®
- é˜²ç«å¢™è§„åˆ™è®¾ç½®
- VPNè®¿é—®æ§åˆ¶

**åº”ç”¨å®‰å…¨**:
- ç¯å¢ƒå˜é‡åŠ å¯†
- å¯†é’¥ç®¡ç†ç³»ç»Ÿ
- å®‰å…¨å®¡è®¡é…ç½®

### 6.3 éªŒæ”¶æ ‡å‡†

#### 6.3.1 åŠŸèƒ½éªŒæ”¶

**æ ¸å¿ƒåŠŸèƒ½éªŒæ”¶**:
- [ ] ç®¡ç†å‘˜è®¤è¯å’Œæƒé™ç®¡ç†æ­£å¸¸å·¥ä½œ
- [ ] æ‰€æœ‰ç”¨æˆ·ç®¡ç†åŠŸèƒ½å®Œæ•´å¯ç”¨
- [ ] é’±åŒ…ç®¡ç†åŠŸèƒ½å‡†ç¡®æ— è¯¯
- [ ] äº¤æ˜“ç®¡ç†æµç¨‹å®Œæ•´
- [ ] ä»»åŠ¡å’Œçº¢åŒ…ç®¡ç†åŠŸèƒ½æ­£å¸¸
- [ ] ç³»ç»Ÿç›‘æ§å’Œå‘Šè­¦æœ‰æ•ˆ

**è¡¥å……åŠŸèƒ½éªŒæ”¶**:
- [ ] å®æ—¶é€šä¿¡ç®¡ç†åŠŸèƒ½å®Œæ•´
- [ ] æ‰‹ç»­è´¹åˆ©æ¶¦ç®¡ç†å‡†ç¡®
- [ ] APIç›‘æ§åŠŸèƒ½æœ‰æ•ˆ
- [ ] åŒºå—é“¾é›†æˆç¨³å®š
- [ ] æ•°æ®è´¨é‡ç®¡ç†å®Œå–„

#### 6.3.2 æ€§èƒ½éªŒæ”¶

**æ€§èƒ½æŒ‡æ ‡**:
- [ ] é¡µé¢åŠ è½½æ—¶é—´ < 2ç§’
- [ ] APIå“åº”æ—¶é—´ < 1ç§’
- [ ] ç³»ç»Ÿå¯ç”¨æ€§ â‰¥ 99.9%
- [ ] å¹¶å‘ç”¨æˆ·æ•° â‰¥ 100

**å®‰å…¨éªŒæ”¶**:
- [ ] é€šè¿‡å®‰å…¨æ¸—é€æµ‹è¯•
- [ ] å®Œæ•´çš„å®¡è®¡æ—¥å¿—è®°å½•
- [ ] æ•æ„Ÿæ•°æ®åŠ å¯†å­˜å‚¨
- [ ] æƒé™æ§åˆ¶æœ‰æ•ˆ

---

## ğŸ“ æ€»ç»“

æœ¬æ–‡æ¡£æä¾›äº†æ•°å­—é’±åŒ…ç®¡ç†åå°ç³»ç»Ÿçš„å®Œæ•´è®¾è®¡æ–¹æ¡ˆï¼Œæ¶µç›–äº†ä»éœ€æ±‚åˆ†æåˆ°æŠ€æœ¯å®ç°çš„æ‰€æœ‰å…³é”®ç¯èŠ‚ã€‚é€šè¿‡ç³»ç»ŸåŒ–çš„è®¾è®¡å’Œè§„åˆ’ï¼Œç¡®ä¿ç®¡ç†åå°èƒ½å¤Ÿï¼š

1. **å…¨é¢è¦†ç›–ä¸šåŠ¡éœ€æ±‚**: 100%è¦†ç›–å‰ç«¯ç³»ç»Ÿçš„æ‰€æœ‰æ•°æ®ç®¡ç†éœ€æ±‚
2. **ä¿éšœç³»ç»Ÿå®‰å…¨**: å¤šå±‚å®‰å…¨é˜²æŠ¤ï¼Œç¡®ä¿æ•°æ®å’Œæ“ä½œå®‰å…¨
3. **æä¾›ä¼˜è´¨ä½“éªŒ**: ç›´è§‚æ˜“ç”¨çš„ç®¡ç†ç•Œé¢å’Œé«˜æ•ˆçš„æ“ä½œæµç¨‹
4. **æ”¯æŒä¸šåŠ¡æ‰©å±•**: çµæ´»çš„æ¶æ„è®¾è®¡ï¼Œæ”¯æŒæœªæ¥ä¸šåŠ¡å‘å±•

### å…³é”®ç‰¹æ€§

- **æ¨¡å—åŒ–è®¾è®¡**: 9ä¸ªæ ¸å¿ƒæ¨¡å— + 6ä¸ªè¡¥å……æ¨¡å—ï¼ŒåŠŸèƒ½å®Œæ•´
- **å®‰å…¨ä¼˜å…ˆ**: å¤šå› ç´ è®¤è¯ã€æƒé™æ§åˆ¶ã€æ•°æ®åŠ å¯†ã€å®¡è®¡è¿½è¸ª
- **é«˜æ€§èƒ½**: ä¼˜åŒ–çš„æ¶æ„è®¾è®¡ï¼Œæ”¯æŒé«˜å¹¶å‘è®¿é—®
- **æ˜“ç»´æŠ¤**: æ¸…æ™°çš„ä»£ç ç»“æ„ï¼Œå®Œå–„çš„æ–‡æ¡£å’Œæµ‹è¯•

### ä¸‹ä¸€æ­¥è¡ŒåŠ¨

1. æ ¹æ®ä¼˜å…ˆçº§å¼€å§‹ç¬¬ä¸€é˜¶æ®µå¼€å‘
2. å»ºç«‹å¼€å‘å›¢é˜Ÿå’Œå·¥ä½œæµç¨‹
3. æ­å»ºå¼€å‘å’Œæµ‹è¯•ç¯å¢ƒ
4. å¼€å§‹æ ¸å¿ƒåŠŸèƒ½çš„è¯¦ç»†è®¾è®¡å’Œå¼€å‘

é€šè¿‡ä¸¥æ ¼æŒ‰ç…§æœ¬è®¾è®¡æ–‡æ¡£æ‰§è¡Œï¼Œå¯ä»¥ç¡®ä¿ç®¡ç†åå°ç³»ç»Ÿçš„æˆåŠŸäº¤ä»˜å’Œç¨³å®šè¿è¡Œã€‚